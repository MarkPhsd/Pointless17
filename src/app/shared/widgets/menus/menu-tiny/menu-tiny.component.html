<ng-template #loading>
  <div class="spinner-container">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>

<div fxLayout="row"
     class="row-class"
     *ngIf="menus; else loading">

  <ul id="accordion"
      class="accordion">
    <li class="menu-item"
        @fade
        *ngFor="let menu of menus; let i = index"
        [class.active]="menu.active">

        <div class="menu" *ngIf="isAuthorized(menu.userType)"
              (click)="toggle(menu, i)">

          <div   class="grid-toggle-tiny">
            <div  class="item-icon" *ngIf="menu.icon">
              <mat-icon>{{ menu.icon }}</mat-icon>
            </div>
            <div  class ="item-name" *ngIf="!tinyMenu">
              {{menu.name | truncateText : 20}}
            </div>
          </div>

        </div>
    </li>
  </ul>

</div>

<div class="submenu-position">
  <div fxLayout="row"
       class="submenu-sections"
       *ngIf="displayCategories" >
    <div *ngIf="submenu">
      <ul id="accordion"
          class="accordion">
        <li class="menu-item"
            @fade
            *ngFor="let item of submenu" >

          <div *ngIf="isAuthorized(item.userType)" >
            <div *ngIf="!item.minimized">
              <div class="menu" >
                <a mat-list-item
                    color=""
                    routerLinkActive={{item.routerLinkActive}}
                    routerLink=      {{item.routerLink}}>

                    <div class="grid-toggle-tiny">
                      <div class="item-font" *ngIf="item.icon">
                        <mat-icon>{{item.icon}}</mat-icon>
                      </div>
                      <div class="item-text" *ngIf="!tinyMenu">
                        {{item.name | truncateText : 20}}
                      </div>
                    </div>

                </a>
              </div>
            </div>
          </div>

        </li>
      </ul>


      <button mat-icon-button
              [matMenuTriggerFor]="menu"
              aria-label=" icon button with a menu">
        <mat-icon>more_vert</mat-icon>
      </button>

  </div>


  <div class="submenu-position" *ngIf="submenu"></div>
    <ul id="accordion"
        class="accordion">
        <li>
          <mat-menu #menu="matMenu">
            <div  *ngFor="let item of submenu">
                <div *ngIf="item.minimized">
                  <div *ngIf="isAuthorized(item.userType)">
                    <button mat-menu-item
                            color=""
                            routerLinkActive={{item.routerLinkActive}}
                            routerLink=      {{item.routerLink}}>

                      <div class="grid-toggle-tiny">
                        <div class="item-font" *ngIf="item.icon">
                          <mat-icon>{{item.icon}}</mat-icon>
                        </div>
                        <div class="item-text" *ngIf="!tinyMenu">
                          {{item.name | truncateText : 20}}
                        </div>
                      </div>

                    </button>
                  </div>
                </div>
              </div>
          </mat-menu>
        </li>
    </ul>
  </div>

  <button mat-icon-button
      (click)="setSmallMenu()"
      aria-label=" toggle">
    <mat-icon>view_compact</mat-icon>
  </button>
  <!-- <button *ngIf="user && user?.roles === 'admin'" mat-icon-button
      (click)="initMenu()"
      aria-label=" toggle">
    <mat-icon>refresh</mat-icon>
  </button> -->
</div>
