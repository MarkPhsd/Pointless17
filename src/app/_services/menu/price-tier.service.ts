import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';
import { ISite } from 'src/app/_interfaces';
import { AuthenticationService } from '..';

// Generated by https://quicktype.io

export interface IPriceTier {
  id:              number;
  name:            string;
  uid:             string;
  webEnabled:      number;
  priceTierPrices: PriceTierPrice[];
}

export interface PriceTierPrice {
  id:             number;
  productPriceID: number;
  quantityFrom:   string;
  quantityTo:     string;
  retail:         string;
  price1:         string;
  price2:         string;
  price3:         string;
  price4:         string;
  price5:         string;
  price6:         string;
  price7:         string;
  price8:         string;
  price9:         string;
  startTime:      string;
  endTime:        string;
  specialPrice:   string;
  weekDays:       string;
  flatQuantity:   string;
  priceName:      string;
  rateOrPrice:    boolean;
}


@Injectable({
  providedIn: 'root'
})
export class PriceTierService {

  price : IPriceTier


  constructor( private http: HttpClient,
    private auth: AuthenticationService
   )
  { }

  getPriceTiers(site: ISite): Observable<IPriceTier[]> {

    const endpoint = "/PriceTiers/"

    const parameters = "GetPriceTiers"

    const url = `${site.url}${endpoint}${parameters}`

    return  this.http.get<IPriceTier[]>(url)

  };


  getPriceTier(site: ISite, id: number): Observable<IPriceTier> {

    const endpoint = "/PriceTiers/"

    const parameters = "GetPriceTiers"

    const url = `${site.url}${endpoint}${parameters}`

    return  this.http.get<IPriceTier>(url)

  };

  putPriceTiers(site: ISite, price: IPriceTier): Observable<IPriceTier[]> {

    const endpoint = "/PriceTiers/"

    const parameters = "putPriceTiers"

    const url = `${site.url}${endpoint}${parameters}`

    return  this.http.put<IPriceTier[]>(url, price)

  };


  postPriceTier(site: ISite, price: IPriceTier): Observable<IPriceTier> {

    const endpoint = "/PriceTiers/"

    const parameters = "postPriceTiers"

    const url = `${site.url}${endpoint}${parameters}`

    return  this.http.post<IPriceTier>(url, price)

  };

  savePriceTier(site: ISite, price: IPriceTier) : Observable<IPriceTier> {

    if (price.id) {
      return  this.postPriceTier(site, price)
    }

    if (!price.id0 {
      return this.putPriceTiers(site, price)
    })

  }
}
