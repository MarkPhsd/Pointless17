<div *ngIf="(action$ | async) as action"></div>
<mat-card [class]="classcontainer">

    <mat-card-subtitle>
      <div class="header-grid" >
        <div  class="grid-title" >
          <div class="header-title" ><ng-content></ng-content></div>
        </div>

        <div>
          <button mat-button
              class="button"
              color="primary"
              (click)="showAll()" >Show All <mat-icon>open_in_new</mat-icon>
          </button>
        </div>

        <ng-container [ngTemplateOutlet]="filter"></ng-container>

        <ng-template #filter>
          <ng-container >
            <button mat-button color="accent" (click)="gotoFilter()"  >
              <mat-icon>manage_search</mat-icon>Filter
            </button>
          </ng-container>
        </ng-template>

        <div class="floating-info
                    slidein
                    loader
                    spinner"
              *ngIf="loading" >
          <mat-spinner diameter="30"></mat-spinner>
        </div>
      </div>

      <div *ngIf="value" class="loader">
        <mat-progress-bar mode="determinate" [value]="value"></mat-progress-bar>
      </div>
    </mat-card-subtitle>

    <mat-card-content *ngIf="(bucket$ | async) as bucketItem">
      <div   [style.height]="panelHeightStyle" [class]="classcontainer" >
            <div  *ngIf="categories"
                  [class]="orderslist"
                  infiniteScroll
                  [infiniteScrollDistance]="2"
                  [infiniteScrollThrottle]="50"
                  (scrolled)              ="onScrollDown()"
                  (scrolledUp)            ="onScrollUp()"
                  [scrollWindow]          ="false">

                <div  class="grid-flow">
                  <div *ngFor="let item of categories; let i = index">

                      <div  class="edit-float-button" *ngIf="this.authenticationService.isAdmin" >
                        <button
                            mat-mini-fab
                            color  ="accent"
                            (click)="editItem(item)" >
                          <mat-icon  color="primary">info</mat-icon>
                        </button>
                      </div>

                      <div  *ngIf="item.id != -1"
                            class="grid-display-device"
                            (click)= "listItems(item.id)">


                        <div class="text">{{item.name  | truncateText: textLength  }}</div>


                        <div class="grid-item">
                          <img
                              loading   = "lazy"
                              draggable = "false"
                              [src]     = "getItemSrc(item?.urlImageMain)"
                              err-SRC   = "getPlaceHolder()"
                              onerror   = "this.src='assets/images/placeholderimage.png'"
                              (click)   = "listItems(item.id)"
                              class     = 'item-image'
                              [alt]     = "item?.description">
                        </div>
                      </div>

                      <div *ngIf="item.id == -1">
                         <div class="text">{{item.name  | truncateText: textLength  }}</div>
                        <div class="grid-item-button">
                          <button mat-raised-button
                                color="warn"
                              (click)  ="nextPage()">
                            <div class="text">Load More...</div>
                          </button>
                        </div>
                      </div>

                  </div>
                </div>
            </div>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <ng-template *ngIf="loading" >
        <mat-spinner></mat-spinner>
      </ng-template>
    </mat-card-actions>

</mat-card>



