<div class="container bg">
  <div class="row-height">
   <div fxLayout="row" fxLayoutAlign="center center" class="row-height">
    <div *ngIf="this.companyName != '' ; else loading">
      <div fxLayout="row"  fxlayoutGap="20px" class="stat-cards">
        <mat-card fxFlex="100%">
          <mat-card-title>
            <div fxLayout="column" fxLayoutAlign="center center" class="row-height">
                <img  *ngIf="logo" [src]="logo" width="125px" [alt]="company"  class="logo">
                <h2>{{compName}} </h2>
            </div>
          </mat-card-title>

          <mat-card-subtitle>
            <div fxLayout="column" fxLayoutAlign="center center" class="row-height">
              <h2>Register to use the App</h2>
              <p>Enter a user name. You may use your phone or email. If it is not unique, <br>
                  you will be requested to choose another.
              </p>
            </div>
          </mat-card-subtitle>

            <mat-card-content>
              <div fxLayout="column" fxLayoutAlign="center center" class="row-height">
                <form [formGroup]="loginForm" >
                  <mat-form-field appearance="fill">
                    <mat-label>Enter Token</mat-label>
                    <input matInput type="text" formControlName="token" class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && f.token.errors }" />
                    <div *ngIf="submitted && f.token.errors" class="invalid-feedback">
                        <div *ngIf="f.token.errors.required">Unique Token from Message</div>
                    </div>
                  </mat-form-field>
                    <br>
                    <mat-form-field appearance="fill">
                        <mat-label>Enter User Name</mat-label>
                        <input matInput type="text" formControlName="userName" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && f.userName.errors }" />
                        <div *ngIf="submitted && f.userName.errors" class="invalid-feedback">
                            <div *ngIf="f.userName.errors.required">Unique User Name Required</div>
                        </div>
                    </mat-form-field>
                    <br>
                    <mat-form-field appearance="fill">
                      <mat-label>Password</mat-label>
                      <input matInput type="text" formControlName="password" class="form-control"
                          [ngClass]="{ 'is-invalid': submitted && f.password.errors }" />
                      <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                          <div *ngIf="f.password.errors.required">Password required</div>
                      </div>
                    </mat-form-field>
                    <br>
                    <mat-form-field appearance="fill">
                      <mat-label>Confirm Password</mat-label>
                      <input matInput type="text" formControlName="confirmPassword" class="form-control"
                          [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }" />
                      <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                          <div *ngIf="f.confirmPassword.errors.required">Confirmation Password  required</div>
                      </div>
                    </mat-form-field>
                    <br>
                    <div fxLayout="column" fxLayoutAlign="center center" class="row-height">
                      <div>
                        <button mat-raised-button color="primary" (click)="onSubmit()">Register</button>
                      </div>
                    </div>
                    {{ statusMessage }}
                </form>
              </div>
            <br>
            <mat-divider></mat-divider>
            <br>
            <div fxLayout="column" fxLayoutAlign="center center" class="row-height">
              <button mat-raised-button  (click)='goBack()'>Cancel</button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
    <br>
    <ng-template #loading >
      <h2>Please wait...is loading.</h2>
      <mat-spinner></mat-spinner>
    </ng-template>
  </div>
  </div>
</div>
