<div fxLayout="column" fxFlexOffset="33%"  fxLayoutAlign="center" fxlayoutGap="20px" class="stat-cards">

    <div fxLayout="row" fxFlexOffset="25%" fxlayoutGap="20px" class="stat-cards">
        <mat-card fxFlex="100%">
            <mat-card-title>
                <h2>Password Reset</h2>
            </mat-card-title>

            <mat-card-subtitle>
                <h2>Enter your username to receive a reset code.</h2>
            </mat-card-subtitle>

            <mat-card-content>
              <div class="login-form" 
                  [formGroup]="loginForm" >

                  <mat-form-field appearance="fill">
                      <mat-label>User</mat-label>
                      <input matInput type="text" formControlName="username" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && f.username.errors }" />
                          <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
                          <div *ngIf="f.username.errors.required">Username is required</div>
                      </div>
                  </mat-form-field>
              </div>
            <button mat-raised-button 
                    (click)="requestResetToken()" 
                    color="primary">Reset Pasword
            </button>

            <div class="results" *ngIf="(request$  | async) as request">
              Result: 
              <div *ngIf="request?.userExists">
                Password reset request token, please check your email or phone.
                <button mat-raised-button (click)="changePassword()">Change Password <mat-icon>link</mat-icon></button>
              </div>

              <div *ngIf="!request?.userExists">
                {{request?.message}}
              </div>
              <div *ngIf="request">
       
              </div>
            </div>
            </mat-card-content>
         
        </mat-card>
    </div>

    <br>
        <mat-divider></mat-divider>
    <br>
    <button mat-raised-button color="primary" routerLinkActive="list-item-active" routerLink="/login">Cancel</button>

</div>
