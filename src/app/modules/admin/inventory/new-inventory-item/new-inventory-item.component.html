<ng-template #loading><mat-spinner diameter="50"></mat-spinner></ng-template>

<div class="body"  *ngIf="item ; else loading">

  <mat-card class="strain-card">

    <mat-card-title>
      <div><h3>Item: {{item.productName}} </h3></div>
      <div><h3>Label:{{item.label}}       </h3></div>
    </mat-card-title>

    <mat-card-subtitle>

      <div class="grid-container" >
        <div class=" sub-container">
          <div class="item-label">Sku</div>
          <div class="item-info"> {{item.sku}} </div>

          <div class="item-label">Type</div>
          <div class="item-info"> {{item.packageType}} </div>

          <div class="item-label">Intake Category </div>
          <div class="item-info"> {{item.productCategoryName}} </div>

          <div class="item-label">Facility Code</div>
          <div class="item-info"> {{item.facilityLicenseNumber}} </div>

          <div>
            <app-product-search-selector
                class         = "fields"
                [productName] = "item.productName"
                [itemType]    = 1
                [searchForm]  = "inputForm"
                (itemSelect)  = "getItem($event)">
                >
              Change Item
            </app-product-search-selector>
          </div>


        </div>

        <div>
          <div class="button-margins">
            <app-edit-buttons-standard
                (outputeupdateItem)     ="updateItem($event)"
                (outputupdateItemExit)  ="updateItemExit($event)"
                (outputupdatedeleteItem)="deleteItem($event)"
                (outputupdateonCancel)  ="onCancel('false')"
              ></app-edit-buttons-standard>
          </div>

          <div class="toggle-items" *ngIf="inputForm"
               [formGroup]="inputForm">

            <div>
              <mat-slide-toggle
                      class="price-values"
                      formGroupName  ="notAvalibleForSale"
                      formControlName="notAvalibleForSale">
                      <mat-label>Not For Sale</mat-label>
              </mat-slide-toggle>
            </div>

            <div >
              <mat-slide-toggle
                      class="price-values"
                      formGroupName  ="requiresAttention"
                      formControlName="requiresAttention">
                      <mat-label>Requires Attention</mat-label>
              </mat-slide-toggle>
            </div>

          </div>
        </div>
      </div>

    <mat-divider></mat-divider>

    </mat-card-subtitle>

    <mat-card-content >
      <div class="grid-container">

          <div class="subtitle grid-container">
            <div >
              <app-inventory-header-values
                [item]="item">
              </app-inventory-header-values>
            </div>

            <div class="grid-spanner">

            </div>
          </div>

          <div>
          <div [formGroup]="inputForm">
            <div  class="header-column">Price</div>
              <mat-form-field  appearance="outline" class=" price-values fields">
                <mat-label >Cost</mat-label>
                <input  matInput
                        type           ="text"
                        formControlName="cost"
                        name           ="cost"
                        class          ="price-values"
                        >
              </mat-form-field>

              <mat-form-field  appearance="outline" class="price-values fields">
                <mat-label >Price</mat-label>
                <input  matInput
                        type           ="text"
                        formControlName="price"
                        name           ="price"
                        class          ="price-values"
                        >
              </mat-form-field>

              <!-- <div>
                <app-price-category-select
                    [itemType]        ="itemType"
                    [priceCategoryID] ="item.priceCategoryID"
                    [inputForm]       ="inputForm" >
                  </app-price-category-select>
              </div> -->

              <div>
                <div  class="header-column">Features</div>
                <app-value-fields
                    [fieldType]="'text'"
                    [inputForm]="inputForm"
                    [fieldName]="'sku'"
                  >Change Sku
                </app-value-fields>
                <mat-hint>Changing the sku will require re-labeling.</mat-hint>
              </div>

            </div>
            <div *ngIf="menuItem && menuItem.itemType.type == 'cannabis' ||
                        menuItem && menuItem.itemType.type == 'med-cannabis'"
                  [formGroup]="inputForm">
              <app-chemical-values 
                [inputForm]="inputForm"
                [inventoryItem]="true"
              >
              </app-chemical-values>
            </div>
          </div>

        </div>
    </mat-card-content>
  </mat-card>
</div>

