<div class="container" >
    <div  class="grid-buttons">
      <div>
        <app-widget-filter
          (messageOut)="receiveData($event)">
        </app-widget-filter>
      </div>
      <div>
        <button mat-raised-button (click)="email()">
          <mat-icon>email</mat-icon>
        </button>
      </div>
      <div>
        <button mat-raised-button (click)="showValues=!showValues">
          <span *ngIf="showValues">
            <mat-icon color="primary">analytics</mat-icon>Hide List Reports
          </span>
          <span *ngIf="!showValues">
            <mat-icon color="primary">analytics</mat-icon>Show List Reports
          </span>
        </button>
      </div>
    </div>

    <div *ngIf="(email$ | async) as email; else emailing"></div>

    <ng-template #emailing>
      <div class="emailing" *ngIf="emailSending">
        <mat-spinner [diameter]="50"></mat-spinner>
        ...emailing
      </div>
    </ng-template>

    <br> <mat-divider  class="section-gap"></mat-divider> <br>

    <div *ngIf="dateFrom && dateTo">

      <div class="grid-flow"
          *ngIf="showValues && dateFrom && dateTo">

        <div  *ngFor="let site of sites$ | async">
          <sales-tax-report
                  [site]="site"
                  [dateFrom]="dateFrom"
                  [dateTo]="dateTo"
                  [minimized]="'true'"
                  [notifier]="childNotifier">
                  <mat-icon>summarize</mat-icon> Sales - {{site.name}}
          </sales-tax-report>

          <payment-report
                  [site]    ="site"
                  [dateFrom]="dateFrom"
                  [dateTo]  ="dateTo"
                  [notifier]="childNotifier">
                  <mat-icon>credit_card</mat-icon> Payments - {{site.name}}
          </payment-report>

        </div>
      </div>

      <div class="grid-charts">
          <div>
            <app-widget-card
              [dateFrom] ="dateFrom"
              [dateTo]   ="dateTo"
              groupBy    ="date"
              chartName  ="ByDate"
              [counter]  ="count+1"
            ></app-widget-card>
          </div>

          <div>
            <app-widget-card
              [dateFrom]="dateFrom"
              [dateTo]   ="dateFrom"
              groupBy    ="hour"
              chartName  ="Hourly"
              [counter]  ="count+1"
              [notifier]="childNotifier"
            ></app-widget-card>
          </div>

          <div>
            <app-widget-card
              [dateFrom] ="dateFrom"
              [dateTo]   ="dateTo"
              groupBy    ="orderemployeecount"
              chartName  ="Employee Order Count"
              [counter]  ="count+1"
              [notifier]="childNotifier"
              ></app-widget-card>
          </div>

          <div>
            <app-widget-card
              [dateFrom] ="dateFrom"
              [dateTo]   ="dateTo"
              groupBy    ="orderemployeesales"
              chartName  ="Employee Order Sales"
              [counter]  ="count+1"
              [notifier]="childNotifier"
            ></app-widget-card>
          </div>

        </div>
    </div>
</div>




