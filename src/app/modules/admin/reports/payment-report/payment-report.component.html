<div *ngIf=" (sales$ | async) as sales; else loading">

  <div *ngIf="sales.resultMessage != 'success'">
    {{sales.resultMessage}}
  </div>

  <div *ngIf="sales.paymentSummary as payments">
    <div  class="mat-card-container"
          *ngIf="sales.resultMessage != 'failed'">
      <mat-card  *ngIf="payments">
        <mat-card-title>
          <div class="grid">
            <div  class="totals_label">
              <h4> <ng-content></ng-content> </h4>
            </div>
          </div>

          <div class="grid">
            <div class="header-labels">
              {{sales.paymentSummary[0].startDate | date: 'short'}}
            </div>
            <div  class="header-labels">
              {{sales.paymentSummary[0].endDate | date: 'short'}}
            </div>
          </div>

        </mat-card-title>

        <mat-card-content>
          <div  class="grid-headerfooter"
               *ngIf="payments && (groupBy === 'paymentMethod' || groupBy === 'Employee')">

              <div *ngIf="groupBy === 'Employee'" class="grid-item">Staff </div>
              <div *ngIf="groupBy === 'Employee'" class="totals">Amount</div>
              <div *ngIf="groupBy === 'Employee'" class="totals">Avg</div>
              <div *ngIf="groupBy === 'Employee'" class="totals">Count</div>
              <div *ngIf="groupBy === 'Employee'" class="totals">Tip</div>

              <div *ngIf="groupBy === 'paymentMethod'" class="grid-item">Method</div>
              <div *ngIf="groupBy === 'paymentMethod'" class="totals">Amount</div>
              <div *ngIf="groupBy === 'paymentMethod'" class="totals">Avg</div>
              <div *ngIf="groupBy === 'paymentMethod'" class="totals">Count</div>
              <div *ngIf="groupBy === 'paymentMethod'" class="totals">Tip</div>
          </div>

          <div  class="grid-order-employeecount"
                *ngIf="payments && groupBy === 'OrderEmployeCount'">
              <div *ngIf="groupBy === 'OrderEmployeCount'" class="grid-item">Staff</div>
              <div *ngIf="groupBy === 'OrderEmployeCount'" class="grid-item">Hour</div>
              <div *ngIf="groupBy === 'OrderEmployeCount'" class="grid-item">Count</div>
              <div *ngIf="groupBy === 'OrderEmployeCount'" class="grid-item">Total</div>
              <div *ngIf="groupBy === 'OrderEmployeCount'" class="grid-item">Avg</div>
          </div>

          <div class="mat-divider">

          </div>

          <app-payment-report-card
              [payments] ="payments"
              [groupBy]="groupBy">
          </app-payment-report-card>

          <mat-divider></mat-divider>
        </mat-card-content>

        <mat-card-footer>

          <div class="grid-footer">
            <div class="grid-items">
              Credit Total
            </div>
            <div class="totals">
              {{sales.creditTotal | currency }}
            </div>
            <div class="totals" >
            </div>
            <div class="totals">
            </div>
          </div>

          <div class="grid-footer"
               *ngIf="payments">
            <div class="grid-item">-----</div>
            <div class="totals">Total</div>
            <div class="totals">Avg</div>
            <div class="totals">Count</div>
          </div>

          <div class="grid-footer">
            <div class="grid-item">
              Total
            </div>
            <div class="totals">
              {{sales.total | currency }}
            </div>
            <div class="totals" *ngIf=" sales.count != 0">
              {{sales.total / sales.count | currency }}
            </div>
            <div class="totals">
              {{sales.count }}
            </div>
          </div>

        </mat-card-footer>
      </mat-card>
    </div>

  </div>

</div>

<ng-template #loading>
  <mat-spinner [diameter]="25" class="spinner"></mat-spinner>
</ng-template>

