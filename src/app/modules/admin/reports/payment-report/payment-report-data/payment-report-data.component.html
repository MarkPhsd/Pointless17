<div class="mat-card-container" 
      *ngIf="!autoPrint && sales.resultMessage != 'success'">
  <mat-card>
      <div  class="totals_label">
      <h4> <ng-content></ng-content> </h4>
    </div>
    {{sales.resultMessage}} - {{groupBy}}
  </mat-card>
</div>

<div  class="mat-card-container" *ngIf=" sales.resultMessage == '' && sales.count == 0 ">
 
  <mat-card *ngIf="!autoPrint">
    <div  class="totals_label">
      <h4> <ng-content></ng-content> </h4>
    </div>
    {{type}} count is 0.
  </mat-card>

  <div *ngIf="autoPrint">
    <h4> <ng-content></ng-content> </h4>
    {{type}} count is 0.
  </div>
  
</div>


<div *ngIf="sales.paymentSummary as payments">
  <div  class="mat-card-container"
        *ngIf="sales.resultMessage != 'failed'">

  <div  *ngIf="payments && autoPrint">
    <ng-container [ngTemplateOutlet]="headerView"></ng-container>
    <ng-container [ngTemplateOutlet]="contentView"></ng-container>
    <ng-container [ngTemplateOutlet]="footerView"></ng-container>
  </div>

  <mat-card  *ngIf="payments && !autoPrint">
    <mat-card-title>
      <ng-container [ngTemplateOutlet]="headerView"></ng-container>
    </mat-card-title>
    <mat-card-content>
      <ng-container [ngTemplateOutlet]="contentView"></ng-container>
      <mat-divider></mat-divider>
    </mat-card-content>
    <mat-card-footer>
      <ng-container [ngTemplateOutlet]="footerView"></ng-container>
    </mat-card-footer>
  </mat-card>

  <ng-template #headerView>
      <div *ngIf="!autoPrint" class="grid">
        <div  class="buttons_label">
          <h4> <ng-content></ng-content> </h4>
          <button mat-raised (click)="downloadCSV()">
            <mat-icon>download</mat-icon></button>
            <button mat-raised (click)="dataGridView()">
              <mat-icon>open_in_full</mat-icon></button>
        </div>
      </div>

      <div class="grid  printFont-14">
        <span *ngIf="autoPrint">
          Type:  {{type}} 
        </span>
        <div class="header-labels">
          {{sales.paymentSummary[0].startDate | date: 'short'}}
        </div>
        <div  class="header-labels">
          {{sales.paymentSummary[0].endDate | date: 'short'}}
        </div>
      </div>
    </ng-template>

    <ng-template #contentView>
      <div  class="grid-headerfooter printFont-14"
          *ngIf="payments && groupBy && (groupBy.toLowerCase() === 'devicename' ||
                              groupBy.toLowerCase() === 'paymentMethod'.toLowerCase() ||
                              groupBy.toLowerCase() === 'employee'.toLowerCase())">
          <div *ngIf="groupBy.toLowerCase()  === 'employee'" class="grid-item">Staff </div>
          <div *ngIf="groupBy.toLowerCase()  === 'employee'" class="totals">Amount</div>
          <div *ngIf="groupBy.toLowerCase()  === 'employee'" class="totals">Avg</div>
          <div *ngIf="groupBy.toLowerCase()  === 'employee'" class="totals">Count</div>
          <div *ngIf="groupBy.toLowerCase() === 'employee'" class="totals">Tip</div>

          <div *ngIf="groupBy === 'paymentMethod'" class="grid-item">Method</div>
          <div *ngIf="groupBy === 'paymentMethod'" class="totals">Amount</div>
          <div *ngIf="groupBy === 'paymentMethod'" class="totals">Avg</div>
          <div *ngIf="groupBy === 'paymentMethod'" class="totals">Count</div>
          <div *ngIf="groupBy === 'paymentMethod'" class="totals">Tip</div>
        </div>

        <div  class="grid-order-employeecount"
          *ngIf="payments && groupBy && groupBy === 'orderemployeecount'">
          <div class="grid-item">Staff</div>
          <div class="grid-item">Hour</div>
          <div class="grid-item">Count</div>
          <div class="grid-item">Total</div>
          <div class="grid-item">Avg</div>
        </div>

        <div  class="grid-order-employeecount"
          *ngIf="payments && groupBy && groupBy === 'service'">
          <div *ngIf="groupBy === 'service'" class="grid-item">Method</div>
          <div *ngIf="groupBy === 'service'" class="totals">Amount</div>
          <div *ngIf="groupBy === 'service'" class="totals">Avg</div>
          <div *ngIf="groupBy === 'service'" class="totals">Count</div>
          <div *ngIf="groupBy === 'service'" class="totals">Tip</div>
        </div>

        <div  class="grid-voids"
          *ngIf="payments && !groupBy">
          <div class="grid-item">Method</div>
          <div class="grid-item">Reason</div>
          <div class="grid-item">Employee</div>
          <div class="grid-item">Order</div>
          <div class="grid-item">Amount </div>
        </div>

        <div class="mat-divider"></div>

        <app-payment-report-card
          [payments] ="payments"
          [type]     ="type"
          [groupBy]  ="groupBy">
        </app-payment-report-card>

    </ng-template>

    <ng-template #footerView>
      <div class="grid-footer-payments  printFont-14" *ngIf="groupBy && (groupBy === 'paymentMethod')">
          
        <mat-divider></mat-divider>
        <div class="mat-divider"></div>

        <div class="grid-items" style="margin-top:10px">
          Credit Total
        </div>
        <div class="totals"  style="margin-top:10px">
          {{sales.creditTotal | currency }}
        </div>
        <div class="totals" >
        </div>
        <div class="totals">
        </div>
      </div>

      <div class="grid-footer-payments" *ngIf="groupBy && (groupBy === 'service')">
        <div class="grid-items">
          Type Total
        </div>
        <div class="totals">
          {{sales.creditTotal | currency }}
        </div>
        <div class="totals" >
        </div>
        <div class="totals">
        </div>
      </div>

      <div class="grid-footer-payments"
            *ngIf="payments">
        <div class="grid-item">-----</div>
        <div class="totals">Total</div>
        <div class="totals">Avg</div>
        <div class="totals">Count</div>
      </div>

      <div class="grid-footer-payments">
        <div class="grid-item">
          Total
        </div>
        <div class="totals">
          {{sales.total | currency }}
        </div>
        <div class="totals" *ngIf=" sales.count != 0">
          {{sales.total / sales.count | currency }}
        </div>
        <div class="totals">
          {{sales.count }}
        </div>
      </div>
    </ng-template>

  </div>
</div>