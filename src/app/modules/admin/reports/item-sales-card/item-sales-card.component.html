
<div
    class="mat-card-container"
    *ngIf="site && (sales$ | async) as summary; else loading">
  <div *ngIf="summary.results as sales">
    <mat-card >
      <mat-card-title>
        <div class="grid">
          <div  class="totals_label">
            <h4> <ng-content></ng-content>
                 <span>
                  <button mat-raised (click)="togglesShowAll()">
                  <mat-icon>expand</mat-icon></button>
                </span>
              </h4>
            <div *ngIf="summary.resultMessage">
              <mat-icon>alert</mat-icon>
              {{summary.resultMessage}}
            </div>
          </div>
        </div>
      </mat-card-title>

      <mat-card-content >
        <div class="grid-body">
          <div class="totalslabel">Item :    </div>
          <div class="totals">Pre Tax :</div>
          <div class="totals">#         </div>
        </div>

        <!-- <div class="grid-body"
             *ngFor="let sale of sales; let i = index;"> -->
        <div  class="grid-body"
              *ngFor="let sale of (showAll ? sales : sales.slice(0,10))" >
            <div class="product-name">{{sale.productName | truncateText : 20   }}      </div>
            <div class="totals">{{sale.itemTotal | currency }}   </div>
            <div class="totals">{{sale.quantity }}               </div>
        </div>

        <div class="margin-divider">
          <mat-divider></mat-divider>
        </div>
      </mat-card-content>

      <mat-card-footer>
        <div *ngIf="summary.summary">
          <div class="grid-footer">
            <div class="totals"> PreTax Totals                             </div>
            <div class="totals">{{summary.summary.itemTotal | currency }}  </div>
            <div class="totals">{{summary.summary.quantity }}              </div>
          </div>
        </div>
      </mat-card-footer>

    </mat-card>
  </div>
</div>

<ng-template #loading>
  <mat-spinner [diameter]="25" class="spinner"></mat-spinner>
</ng-template>
