<h4><mat-icon>cached</mat-icon>Cache Settings</h4>

<div *ngIf="currentCache">
  Current cache:
  <mat-divider></mat-divider>
</div>

<div *ngIf="(cacheTimeSetting$ | async) as cacheTimeSetting">
  <div *ngIf="cacheForm">
    <div [formGroup]="cacheForm">
      <div class="fields">
          <mat-slide-toggle
                    [(ngModel)] ="cacheTimeSetting.boolean"
                    formControlName="boolean"
                    (change)="updateCacheTime()">
          <mat-label>Enable Cache</mat-label>
          </mat-slide-toggle>
      </div>

      <div class="fields">
        <mat-form-field  appearance="outline" class="example-form-field">
          <mat-label>Cache Time</mat-label>
            <input matInput
                type="text"
                name = "value"
                formControlName="value"
                [(ngModel)] ="cacheTimeSetting.value"
                (change)="updateCacheTime()"
            >
        </mat-form-field>
      </div>



    </div>
  </div>
  <div class="fields">
    <!-- using webenabled as field until app cache converted to json -->
    <mat-slide-toggle
              [(ngModel)] ="debugMode"
              (change)="updateDebugMode()">
    <mat-label>Debug Mode</mat-label>
    </mat-slide-toggle>
  </div>
  <div>
    <div class="fields">
      <!-- Estimated cache size: {{ cacheSizeCurrent  }} -->
      Estimated cache size: {{ cacheSize  | number:'1.0-3' }}
    </div>
    <div class="fields">
      <button mat-raised-button
              color="warn"
              (click)="deleteLocalStorage()">Delete Cache</button>
    </div>
    <div class="fields">
      Deleting the cache will log you out. It will not affect other users.
    </div>
  </div>

  <api-stored-value></api-stored-value>

</div>
