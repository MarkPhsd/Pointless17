<div *ngIf="(action$ | async) as item; else loading"></div>
<ng-template #loading>
  <div *ngIf="processing">
    ..sending
    <mat-spinner [diameter]="50"></mat-spinner>
  </div>
</ng-template>

<div *ngIf="promptGroup">
  <mat-card class="mat-card">
    <mat-card-subtitle>
      <div class="grid-menu">
        <div>
          <h4>
              {{promptGroup?.name}}
          </h4>
        </div>
        <div>
          <ng-container [ngTemplateOutlet]="largeScreenButtons"></ng-container>
        </div>
      </div>

    </mat-card-subtitle>
    <mat-card-content>
      <div
          [innerHTML]="promptGroup?.instructions">
      </div>
    </mat-card-content>
  </mat-card>
  <mat-divider></mat-divider>

  <mat-card>
    <div class="grid-prompt">
      <div>
        <prompt-sub-group-panel></prompt-sub-group-panel>
      </div>
      <div>
        <prompt-items-selected></prompt-items-selected>
      </div>
    </div>

    <mat-card-actions>
      <div>
        <mat-form-field  class="notes" appearance="outline">
          <mat-label>Notes</mat-label>
            <textarea matInput
                      rows="4"
                      columns="40"
                      [(ngModel)]="modifierNote"
            ></textarea>
        </mat-form-field>
      </div>
    </mat-card-actions>

  </mat-card>
  <ng-container [ngTemplateOutlet]="smallScreenButtons"></ng-container>
</div>

<ng-template #buttonDisplay>
  <div class="grid-list">
    <button class="item-button" mat-raised-button (click)="reset()"><mat-icon>refresh</mat-icon>Start Over</button>
    <button class="item-button" mat-raised-button (click)="cancel()"><mat-icon>cancel</mat-icon>Cancel <br> All Items</button>
    <button class="item-button" mat-raised-button (click)="close()"><mat-icon>close</mat-icon>Close <br> Without Saving</button>
    <button class="item-button" mat-raised-button (click)="applyChoices()"><mat-icon>approval</mat-icon>Apply Choices</button>
  </div>
</ng-template>

<!-- {{orderPromptGroup | json}} -->
