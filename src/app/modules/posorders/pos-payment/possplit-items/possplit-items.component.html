<div class="grid-container">
   <div class="toggle-group" *ngIf="!smallDevice &&  values && !savingChanges">
      <mat-button-toggle-group
            name         = "type"
            vertical>
        <mat-button-toggle
              *ngFor      ="let item of values"
              class       ="toggle-button-wide"
              type        ="button"
              [value]     ="item"
              (click)     ="applyGroupID(item)"
              id          ="item.id">
          {{item.name}}
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>

    <div>
      <mat-card>
        <mat-card-subtitle>
          <div class="span-column">
            <mat-label>Group: {{currentGroupID}}. Apply all splits before making payments. </mat-label>
            <mat-label>Once payments are made more splits can not be done.</mat-label>
             <mat-card *ngIf="(orderGroupTotal$ | async) as groupOrder; else calculating">
              <mat-card-content>
                <br>
                Balance: {{groupOrder.balanceRemaining |currency}}
                <br>
                Total:   {{groupOrder.total | currency}}
              </mat-card-content>

              <mat-card-actions >
                <div class="buttons-grid">
                  <div>
                    <button mat-raised-button color="primary" (click)="refreshOrder()">
                      <mat-icon>refresh</mat-icon>Refresh Order
                    </button>
                  </div>

                  <div>
                    <div><button color="primary" mat-raised-button (click)="printReceipt()"><mat-icon>print</mat-icon></button></div>
                  </div>

                  <div *ngIf="changesOcurred">
                    <button mat-raised-button color="primary" (click)="saveChanges()">
                      <mat-icon>save</mat-icon>Save Changes
                    </button>
                  </div>
                  <div *ngIf="!changesOcurred && groupOrder.total>0">
                    <button mat-raised-button color="primary" (click)="submitPaymentAmount()">
                      <mat-icon>save</mat-icon>Make Payment
                    </button>
                  </div>
                </div>

              </mat-card-actions>
            </mat-card>
            <ng-template #calculating>
              <mat-card>
                ...calculating <mat-spinner [diameter]="25"></mat-spinner>
              </mat-card>
            </ng-template>
          </div>
        </mat-card-subtitle>
        <mat-card-content >

          <ng-template #savingChangesOn>
            ...saving
          </ng-template>

          <div class="span-column" *ngIf="!savingChanges; else savingChangesOn">
            <div class="grid-dual-list">

              <div class="col-md-6 col-lg-6 col-sm-12 dualListLeft">

                <div class="primary-container drag-drop-container">
                  Avalible Items
                  <div
                    cdkDropList
                    #availables="cdkDropList"
                    [cdkDropListData]="availableItems"
                    [cdkDropListConnectedTo]="[selects]"
                    (cdkDropListDropped)="drop($event)"
                    class="drag-drop-list"
                  >
                    <div
                      nbButton
                      outline
                      status="primary"
                      class="drag-drop-box"
                      *ngFor="let item of availableItems"
                      cdkDrag
                    >
                      {{ item.text }}
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-6 col-lg-6 col-sm-12 dualListRight">
                <div class="primary-container drag-drop-container">
                  Items in group {{currentGroup}}
                  <div
                    cdkDropList
                    #selects="cdkDropList"
                    [cdkDropListData]="selectedItems"
                    [cdkDropListConnectedTo]="[availables]"
                    (cdkDropListDropped)="drop($event)"
                    class="drag-drop-list" >
                    <div
                      nbButton
                      outline
                      status="primary"
                      class="drag-drop-box"
                      *ngFor="let item of selectedItems"
                      cdkDrag>
                      {{ item.text }}
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </mat-card-content>
      </mat-card>

    </div>
</div>

<div *ngIf="(selectedItems$ | async) as selectedItems"></div>
<div *ngIf="(allitems$ | async) as allitems"></div>
<div *ngIf="(saveAssignedItems$ | async) as savedItems"></div>
<div *ngIf="(printReceipt$ | async) as printView"></div>
