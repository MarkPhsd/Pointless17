<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>pointless documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">pointless documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  rowItem</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/modules/admin/employees/employee-list/employee-list.component.ts</code>
        </p>




        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#cellRenderer" 
>
                                            cellRenderer
                                        </a>
                                </li>
                                <li>
                                        <a href="#cellRendererParams" 
>
                                            cellRendererParams
                                        </a>
                                </li>
                                <li>
                                        <a href="#field" 
>
                                            field
                                        </a>
                                </li>
                                <li>
                                        <a href="#flex" 
>
                                            flex
                                        </a>
                                </li>
                                <li>
                                        <a href="#headerName" 
>
                                            headerName
                                        </a>
                                </li>
                                <li>
                                        <a href="#maxWidth" 
>
                                            maxWidth
                                        </a>
                                </li>
                                <li>
                                        <a href="#minWidth" 
>
                                            minWidth
                                        </a>
                                </li>
                                <li>
                                        <a href="#sortable" 
>
                                            sortable
                                        </a>
                                </li>
                                <li>
                                        <a href="#width" 
>
                                            width
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="cellRenderer"></a>
                                        <span class="name "><b>cellRenderer</b>
                                            <a href="#cellRenderer">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>cellRenderer:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="cellRendererParams"></a>
                                        <span class="name "><b>cellRendererParams</b>
                                            <a href="#cellRendererParams">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>cellRendererParams:         <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="field"></a>
                                        <span class="name "><b>field</b>
                                            <a href="#field">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>field:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="flex"></a>
                                        <span class="name "><b>flex</b>
                                            <a href="#flex">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>flex:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="headerName"></a>
                                        <span class="name "><b>headerName</b>
                                            <a href="#headerName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>headerName:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="maxWidth"></a>
                                        <span class="name "><b>maxWidth</b>
                                            <a href="#maxWidth">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>maxWidth:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="minWidth"></a>
                                        <span class="name "><b>minWidth</b>
                                            <a href="#minWidth">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>minWidth:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="sortable"></a>
                                        <span class="name "><b>sortable</b>
                                            <a href="#sortable">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>sortable:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="width"></a>
                                        <span class="name "><b>width</b>
                                            <a href="#width">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>width:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component,   OnInit,
  ViewChild ,ElementRef, AfterViewInit, HostListener, OnDestroy } from &#x27;@angular/core&#x27;;
import { Router } from &#x27;@angular/router&#x27;;
import { MatSnackBar } from &#x27;@angular/material/snack-bar&#x27;;
import { AWSBucketService,  } from &#x27;src/app/_services&#x27;;
import { SitesService } from &#x27;src/app/_services/reporting/sites.service&#x27;;
import { UntypedFormBuilder, UntypedFormControl, UntypedFormGroup } from &#x27;@angular/forms&#x27;;
import { debounceTime, distinctUntilChanged, switchMap,filter,tap } from &#x27;rxjs/operators&#x27;;
import { Observable, Subject ,fromEvent, Subscription } from &#x27;rxjs&#x27;;
import { AgGridFormatingService } from &#x27;src/app/_components/_aggrid/ag-grid-formating.service&#x27;;
// import { GridAlignColumnsDirective } from &#x27;@angular/flex-layout/grid/typings/align-columns/align-columns&#x27;;
import { IGetRowsParams,  GridApi } from &#x27;ag-grid-community&#x27;;
// import &quot;ag-grid-community/dist/styles/ag-grid.css&quot;;
// import &quot;ag-grid-community/dist/styles/ag-theme-alpine.css&quot;;
// import &#x27;ag-grid-community/dist/styles/ag-theme-material.css&#x27;;
import { ButtonRendererComponent } from &#x27;src/app/_components/btn-renderer.component&#x27;;
import { employee,} from &#x27;src/app/_interfaces&#x27;;
import { Capacitor,  } from &#x27;@capacitor/core&#x27;;
import { UserAuthorizationService } from &#x27;src/app/_services/system/user-authorization.service&#x27;;
import { BalanceSheetSearchModel, IBalanceSheet} from &#x27;src/app/_services/transactions/balance-sheet.service&#x27;;
import { MatBottomSheet } from &#x27;@angular/material/bottom-sheet&#x27;;
import { EmployeeSearchModel, EmployeeSearchResults, EmployeeService } from &#x27;src/app/_services/people/employee-service.service&#x27;;
import { EmployeeEditComponent } from &#x27;../employee-edit/employee-edit.component&#x27;;
import { ProductEditButtonService } from &#x27;src/app/_services/menu/product-edit-button.service&#x27;;

export interface rowItem {
  field: string,
  cellRenderer: string,
  cellRendererParams: any;
  minWidth: number;
  maxWidth: number;
  width   : number;
  flex: number;
  headerName: string;
  sortable: boolean;
}
@Component({
  selector: &#x27;employee-list&#x27;,
  templateUrl: &#x27;./employee-list.component.html&#x27;,
  styleUrls: [&#x27;./employee-list.component.scss&#x27;]
})
export class EmployeeListComponent implements OnInit , OnDestroy, AfterViewInit{

  toggleListGrid &#x3D; true // displays list of payments or grid
  //search with debounce: also requires AfterViewInit()
  @ViewChild(&#x27;input&#x27;, {static: true}) input: ElementRef;

  searchPhrase:         Subject&lt;any&gt; &#x3D; new Subject();
  get itemName() { return this.searchForm.get(&quot;itemName&quot;) as UntypedFormControl;}
  private readonly onDestroy &#x3D; new Subject&lt;void&gt;();
  dateRange        : UntypedFormGroup;

  // //search with debounce
  searchItems$              : Subject&lt;BalanceSheetSearchModel&gt; &#x3D; new Subject();
  _searchItems$ &#x3D; this.searchPhrase.pipe(
    debounceTime(250),
      distinctUntilChanged(),
      switchMap(searchPhrase &#x3D;&gt;
        this.refreshSearch()
    )
  )

  get platForm()         {  return Capacitor.getPlatform(); }
  get PaginationPageSize(): number {return this.pageSize;  }
  get gridAPI(): GridApi {  return this.gridApi;  }

  //AgGrid
  params               : any;
  private gridApi      : GridApi;
  // private gridColumnApi: GridAlignColumnsDirective;
  gridOptions          : any
  columnDefs           &#x3D; [];
  defaultColDef        ;
  frameworkComponents  : any;
  rowSelection         : any;
  rowDataClicked1      &#x3D; {};
  rowDataClicked2      &#x3D; {};
  rowData:             any[];
  pageSize                &#x3D; 20
  currentRow              &#x3D; 1;
  currentPage             &#x3D; 1
  numberOfPages           &#x3D; 1
  startRow                &#x3D; 0;
  endRow                  &#x3D; 0;
  recordCount             &#x3D; 0;
  isfirstpage             : boolean;
  islastpage              : boolean;
  value             : any;
  // //This is for the filter Section//
  //search form filters
  searchForm:        UntypedFormGroup;
  inputForm        : UntypedFormGroup;
  jobTypeID     : number;
  selected        : any[];
  selectedRows    : any;
  agtheme         &#x3D; &#x27;ag-theme-material&#x27;;
  gridDimensions  &#x3D; &quot;width: 100%; height: 100%;&quot;
  urlPath:        string;

  id              : number;
  balanceSheet      : IBalanceSheet;

  employee        :   employee
  employees$      :   Observable&lt;employee[]&gt;;

  _searchModel    :   Subscription;
  searchModel     :   EmployeeSearchModel;
  isAuthorized    :   boolean;
  isStaff         :   boolean;
  smallDevice       &#x3D; false;

  buttonName      &#x3D; &#x27;Edit&#x27;;
  metrcButtonName &#x3D; &#x27;METRC&#x27;

  constructor(  private _snackBar               : MatSnackBar,
                private employeeService         : EmployeeService,
                private fb                      : UntypedFormBuilder,
                private productEditButtonService: ProductEditButtonService,
                private siteService             : SitesService,
                private agGridFormatingService  : AgGridFormatingService,
                private awsService              : AWSBucketService,
                private userAuthorization       : UserAuthorizationService,
                private router                  : Router,
                private _bottomSheet            : MatBottomSheet,
              )
  {
    this.initSubscriptions();
    this.initForm();
    this.initAgGrid(this.pageSize);
  }

  ngOnDestroy(): void {
    if (this._searchModel) {this._searchModel.unsubscribe()}
  }

  async ngOnInit() {
    this.initClasses()
    this.urlPath            &#x3D; await this.awsService.awsBucketURL();
    this.rowSelection       &#x3D; &#x27;multiple&#x27;

    this.isAuthorized &#x3D;  this.userAuthorization.isManagement// //(&#x27;admin, manager&#x27;)
    this.isStaff &#x3D;  this.userAuthorization.isStaff // (&#x27;admin, manager, employee&#x27;)

    this.updateItemsPerPage(); //run last in this process!
  };

  initClasses()  {
    const platForm      &#x3D; this.platForm;
    this.gridDimensions &#x3D; &#x27;width: 100%; height: 100%;&#x27;
    this.agtheme        &#x3D; &#x27;ag-theme-material&#x27;;
    if (platForm &#x3D;&#x3D;&#x3D; &#x27;capacitor&#x27;) { this.gridDimensions &#x3D;  &#x27;width: 100%; height: 90%;&#x27; }
    if (platForm &#x3D;&#x3D;&#x3D; &#x27;electron&#x27;)  { this.gridDimensions &#x3D; &#x27;width: 100%; height: 90%;&#x27; }
  }

  initForm() {
    this.searchForm &#x3D; this.fb.group({
      itemName : [&#x27;&#x27;]
    })
    this.dateRange &#x3D; new UntypedFormGroup({
      start: new UntypedFormControl(),
      end: new UntypedFormControl()
    });
  }

  @HostListener(&quot;window:resize&quot;, [])
  updateItemsPerPage() {
    this.smallDevice &#x3D; false
    if (window.innerWidth &lt; 768) {
      this.smallDevice &#x3D; true
      this.gridDimensions &#x3D; &#x27;width: 100%; height: 85%;&#x27;
    }
  }

  ngAfterViewInit() {
    if (this.input) {
      fromEvent(this.input.nativeElement,&#x27;keyup&#x27;)
      .pipe(
        filter(Boolean),
        debounceTime(500),
        distinctUntilChanged(),
        tap((event:KeyboardEvent) &#x3D;&gt; {
          const search  &#x3D; this.input.nativeElement.value
          this.refreshSearch();
        })
      )
      .subscribe();
    }
  }


  initSubscriptions() {
    try {
      this._searchModel &#x3D; this.employeeService.searchModel$.subscribe( data &#x3D;&gt; {
          this.searchModel            &#x3D; data

          if (!this.searchModel) {
            const searchModel       &#x3D; {} as EmployeeSearchModel;
            this.currentPage        &#x3D; 1
            searchModel.terminated  &#x3D; &quot;1&quot;
            searchModel.pageNumber  &#x3D; 1;
            searchModel.pageSize    &#x3D; 25;
            this.searchModel        &#x3D; searchModel
          }
          this.refreshSearch_sub()
        }
      )

    } catch (error) {

    }
  }

  //ag-grid
  //standard formating for ag-grid.
  //requires addjustment of column defs, other sections can be left the same.
  initAgGrid(pageSize: number) {
    this.frameworkComponents &#x3D; {
      btnCellRenderer: ButtonRendererComponent
    };

    this.defaultColDef &#x3D; {
      flex: 2,
    };

    let item  &#x3D;   {
      field: &#x27;id&#x27;,
      cellRenderer: &quot;btnCellRenderer&quot;,
                    cellRendererParams: {
                        onClick: this.editItemWithId.bind(this),
                        label:  this.buttonName,
                        getLabelFunction: this.getLabel.bind(this),
                        btnClass: &#x27;btn btn-primary btn-sm&#x27;
                      },
                      minWidth: 125,
                      maxWidth: 125,
                      width   : 100,
                      flex: 2,
                      headerName: &#x27;&#x27;,
                      sortable: false,
      } as rowItem
      this.columnDefs.push(item);

      const site &#x3D; this.siteService.getAssignedSite();

      if (site.metrcURL ) {

        let item  &#x3D;   {
          field: &#x27;id&#x27;,
          cellRenderer: &quot;btnCellRenderer&quot;,
                        cellRendererParams: {
                            onClick: this.applyMetrcKey.bind(this),
                            label: this.metrcButtonName,
                            getLabelFunction: this.getCheckInLabel.bind(this),
                            btnClass: &#x27;btn btn-primary btn-sm&#x27;
                          },
                          minWidth: 125,
                          maxWidth: 125,
                          width   : 100,
                          flex: 2,
                          headerName: &#x27;&#x27;,
                          sortable: false,
          } as rowItem

          this.columnDefs.push(item);
      }


      item &#x3D;   {headerName: &#x27;Last Name&#x27;,     field: &#x27;lastName&#x27;, sortable: true,
        width   : 100,
        minWidth: 200,
        maxWidth: 200,
        flex    : 2,
      } as any
      this.columnDefs.push(item);

      item &#x3D;   {headerName: &#x27;First Name&#x27;,     field: &#x27;firstName&#x27;, sortable: true,
        width   : 100,
        minWidth: 200,
        maxWidth: 200,
        flex    : 2,
      } as any
      this.columnDefs.push(item);

      item &#x3D;   {headerName: &#x27;Termination&#x27;,     field: &#x27;terminationDate&#x27;, sortable: true,
          width   : 100,
          minWidth: 200,
          maxWidth: 200,
          flex    : 2,
      } as any
      this.columnDefs.push(item);

    this.gridOptions &#x3D; this.agGridFormatingService.initGridOptions(pageSize, this.columnDefs);
  }

  listAll(){
    const control &#x3D; this.itemName
    control.setValue(&#x27;&#x27;)
    this.refreshSearch()
  }

  autoSizeAll(skipHeader) {
    try {
      var allColumnIds &#x3D; [];
      this.gridOptions.columnApi.getAllColumns().forEach(function (column) {
        allColumnIds.push(column.colId);
      });
      this.gridOptions.columnApi.autoSizeColumns(allColumnIds, skipHeader);
    } catch (error) {
      console.log(error)
    }
  }

  //initialize filter each time before getting data.
  //the filter fields are stored as variables not as an object since forms
  //and other things are required per grid.
  initSearchModel(): EmployeeSearchModel {

    let searchModel        &#x3D; {} as EmployeeSearchModel;
    searchModel.jobTypeID  &#x3D; 0
    searchModel.pageSize   &#x3D; this.pageSize
    searchModel.pageNumber &#x3D; this.currentPage
    searchModel.terminated &#x3D; &quot;1&quot;

    if (this.jobTypeID &amp;&amp; this.jobTypeID !&#x3D;0 ) {
      searchModel.jobTypeID  &#x3D; this.jobTypeID;
    }

    if (this.searchModel) {
      searchModel &#x3D; this.searchModel
    }

    return searchModel
  }

  refreshSearchAny(event) {

    this.employeeService.searchModel$.subscribe(data &#x3D;&gt; {
      this.searchModel &#x3D; data;
      console.log(&#x27;update search&#x27;, data)
      return this.refreshSearch_sub()
    })

  }

  //this is called from subject rxjs obversablve above constructor.
  refreshSearch(): Observable&lt;EmployeeSearchModel&gt; {
    // this.currentPage         &#x3D; 1
    const searchModel        &#x3D; this.initSearchModel();
    return this.refreshSearch_sub()
  }

  refreshSearch_sub(): Observable&lt;EmployeeSearchModel&gt; {
    if (this.params){
      this.params.startRow     &#x3D; 1;
      this.params.endRow       &#x3D; this.pageSize;
    }
    this.onGridReady(this.params)
    return this._searchItems$
  }

  //this doesn&#x27;t change the page, but updates the properties for getting data from the server.
  setCurrentPage(startRow: number, endRow: number): number {
    const tempStartRow &#x3D; this.startRow
    this.startRow      &#x3D; startRow
    this.endRow        &#x3D; endRow;
    if (tempStartRow &gt; startRow) { return this.currentPage - 1 }
    if (tempStartRow &lt; startRow) { return this.currentPage + 1 }
    return this.currentPage
  }

  //ag-grid standard method.
  getDataSource(params) {
    return {
    getRows: (params: IGetRowsParams) &#x3D;&gt; {
      const items$ &#x3D; this.getRowData(params, params.startRow, params.endRow)
      items$.subscribe(data &#x3D;&gt;
        {
            if (data.paging) {
              const resp &#x3D;  data.paging
              this.isfirstpage   &#x3D; resp.isFirstPage
              this.islastpage    &#x3D; resp.isFirstPage
              this.currentPage   &#x3D; resp.currentPage
              this.numberOfPages &#x3D; resp.pageCount
              this.recordCount   &#x3D; resp.recordCount
            }
            if (this.numberOfPages !&#x3D;0 &amp;&amp; this.numberOfPages) {
              this.value &#x3D; ((this.currentPage / this.numberOfPages ) * 100).toFixed(0)
            }
            if (data.results) {
              params.successCallback(data.results)

              this.rowData &#x3D; data.results
            }

          }, err &#x3D;&gt; {
            console.log(err)
          }
      );
      }
    };
    if (this.numberOfPages !&#x3D;0 &amp;&amp; this.numberOfPages) {
      this.value &#x3D; ((this.currentPage / this.numberOfPages ) * 100).toFixed(0)
    }
  }

  //ag-grid standard method
  getRowData(params, startRow: number, endRow: number):  Observable&lt;EmployeeSearchResults&gt;  {
    this.currentPage          &#x3D; this.setCurrentPage(startRow, endRow)
    this.searchModel.currentPage &#x3D; this.currentPage;
    const searchModel         &#x3D; this.initSearchModel();
    console.log(&#x27;search Model get row data&#x27;, searchModel)
    const site                &#x3D; this.siteService.getAssignedSite()
    return this.employeeService.getEmployeeBySearch(site, searchModel)
  }

  //ag-grid standard method
  async onGridReady(params: any) {
    if (!params) { return }
    if (params)  {
      this.params  &#x3D; params
      this.gridApi &#x3D; params.api;
      // this.gridColumnApi &#x3D; params.columnApi;
      params.api.sizeColumnsToFit();
      this.autoSizeAll(false)
    }

    this.onFirstDataRendered(this.params)

    // if (!params) { return }
    if (params &#x3D;&#x3D; undefined) { return }
    if (!params.startRow ||  !params.endRow) {
      params.startRow &#x3D; 1
      params.endRow &#x3D; this.pageSize;
    }

    let datasource &#x3D;  {
      getRows: (params: IGetRowsParams) &#x3D;&gt; {
      const items$ &#x3D;  this.getRowData(params, params.startRow, params.endRow)
      items$.subscribe(data &#x3D;&gt;
        {
            const resp         &#x3D;  data.paging
            if (resp) {
              this.isfirstpage   &#x3D; resp.isFirstPage
              this.islastpage    &#x3D; resp.isFirstPage
              this.currentPage   &#x3D; resp.currentPage
              this.numberOfPages &#x3D; resp.pageCount
              this.recordCount   &#x3D; resp.recordCount
              if (this.numberOfPages !&#x3D;0 &amp;&amp; this.numberOfPages) {
                this.value &#x3D; ((this.currentPage / this.numberOfPages ) * 100).toFixed(0)
              }
            }
            if (data.results) {
              let results  &#x3D;  this.refreshImages(data.results)
              params.successCallback(results)
              this.rowData &#x3D; results
            }
          }
        );
      }
    };

    if (!datasource)   { return }
    if (!this.gridApi) { return }
    this.gridApi.setDatasource(datasource);
    this.autoSizeAll(true)
  }

   onFirstDataRendered (params) {
    try {
      params.api.sizeColumnsToFit()
      window.setTimeout(() &#x3D;&gt; {
        const colIds &#x3D; params.columnApi.getAllColumns().map(c &#x3D;&gt; c.colId)
        params.columnApi.autoSizeColumns(colIds)
      }, 50)
     } catch (error) {
      console.log(error)
    }
   }

  refreshImages(data) {
    const urlPath &#x3D; this.urlPath
    if (urlPath) {
      data.forEach( item &#x3D;&gt;
        {
          if (item.urlImageMain) {
            const list &#x3D; item.urlImageMain.split(&#x27;,&#x27;)
            if (list[0]) {
              item.imageName &#x3D; &#x60;${urlPath}${list[0]}&#x60;
            }
          }
        }
      )
    }
    return data;
  }

  //search method for debounce on form field
  displayFn(search) {
    this.selectItem(search)
    console.log(&#x27;displayFn&#x27;, search)
    return search;
  }

  //search method for debounce on form field
  selectItem(search){
    if (search) {
      this.currentPage &#x3D; 1
      this.searchPhrase.next(search)
    }
  }

  //mutli select method for selection change.
  onSelectionChanged(event) {
    let selectedRows       &#x3D; this.gridApi.getSelectedRows();
    let selectedRowsString &#x3D; &#x27;&#x27;;
    let maxToShow          &#x3D; this.pageSize;
    let selected           &#x3D; []
    selectedRows.forEach(function (selectedRow, index) {
    if (index &gt;&#x3D; maxToShow) { return; }
    if (index &gt; 0) {  selectedRowsString +&#x3D; &#x27;, &#x27;;  }
      selected.push(selectedRow.id)
      selectedRowsString +&#x3D; selectedRow.name;
    });
    if (selectedRows.length &gt; maxToShow) {
    let othersCount &#x3D; selectedRows.length - maxToShow;
    selectedRowsString +&#x3D;
      &#x27; and &#x27; + othersCount + &#x27; other&#x27; + (othersCount !&#x3D;&#x3D; 1 ? &#x27;s&#x27; : &#x27;&#x27;);
    }
    if (selected) {
      this.selected &#x3D; selected
      this.id &#x3D; selectedRows[0].id;
      this.getItem(this.id)
    }
  }

  getItem(id: number) {
    this.employeeService.updateCurrentEditEmployee(null);
    if (id) {
      const site &#x3D; this.siteService.getAssignedSite();
      this.employeeService.getEmployee(site, this.id).subscribe(data &#x3D;&gt; {
         this.employee &#x3D; data;
         this.employeeService.updateCurrentEditEmployee(data)
        }
      )
    }
  }

  onExportToCsv() {
    this.gridApi.exportDataAsCsv();
  }

  getLabel(rowData)
  {
    if(rowData &amp;&amp; rowData.hasIndicator)
      return this.buttonName
      else return this.buttonName
  }

  getCheckInLabel(rowData)
  {
    if(rowData &amp;&amp; rowData.hasIndicator)
      return this.metrcButtonName
      else return this.metrcButtonName
  }

  onBtnClick1(e) {
    this.rowDataClicked1 &#x3D; e.rowData;
  }

  onBtnClick2(e) {
    this.rowDataClicked2 &#x3D; e.rowData;
  }

  editItemWithId(item:any) {
    if(!item) {
      console.log(item)
      return
    }
    const id   &#x3D; item.rowData.id;
    const site &#x3D; this.siteService.getAssignedSite()
    this.router.navigate([&#x27;/employee-edit&#x27;, {id:item.rowData.id}]);
  }

  applyMetrcKey(item:any){
    if(!item) {
      console.log(item)
      return
    }
    const id   &#x3D; item.rowData.id;
    const site &#x3D; this.siteService.getAssignedSite()
    this.employeeService.getEmployee(site, id).subscribe(data &#x3D;&gt; {
       this.employeeService.updateCurrentEditEmployee(data)
       this.productEditButtonService.openEmployeeMetrcKeyEntryComponent(data)
    })
  }

  onSortByNameAndPrice(sort: string) { }

  notifyEvent(message: string, action: string) {
    this._snackBar.open(message, action, {
    duration: 2000,
    verticalPosition: &#x27;top&#x27;
    });
  }

  filterBottomSheet() {
    this._bottomSheet.open(EmployeeEditComponent);
  }
}

</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'rowItem-1.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
