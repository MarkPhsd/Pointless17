<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>pointless documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">pointless documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  RStream</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/_services/system/settings/uisettings.service.ts</code>
        </p>




        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#CmdResponse" 
>
                                            CmdResponse
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="CmdResponse"></a>
                                        <span class="name "><b>CmdResponse</b>
                                            <a href="#CmdResponse">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>CmdResponse:         <code><a href="../interfaces/CmdResponse.html" target="_self" >CmdResponse</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../interfaces/CmdResponse.html" target="_self" >CmdResponse</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable} from &#x27;@angular/core&#x27;;
import { UntypedFormBuilder, UntypedFormGroup } from &#x27;@angular/forms&#x27;;
import { MatSnackBar } from &#x27;@angular/material/snack-bar&#x27;;
import { BehaviorSubject, Observable, of, switchMap } from &#x27;rxjs&#x27;;
import { ISetting, IUser } from &#x27;src/app/_interfaces&#x27;;
import { SitesService } from &#x27;../../reporting/sites.service&#x27;;
import { EmailModel } from &#x27;../../twilio/send-grid.service&#x27;;
import { SettingsService } from &#x27;../settings.service&#x27;;
import { UserAuthorizationService } from &#x27;../user-authorization.service&#x27;;
import { ITerminalSettings } from &#x27;src/app/_services/system/settings.service&#x27;;
import { MatDialog } from &#x27;@angular/material/dialog&#x27;;
import { PosEditSettingsComponent } from &#x27;src/app/modules/admin/settings/pos-list/pos-edit-settings/pos-edit-settings.component&#x27;;
import { ElectronService } from &#x27;ngx-electron&#x27;;
import { PlatformService } from &#x27;../platform.service&#x27;;

export interface ContactFieldOptions {
  id: number;
  exp: boolean;
  account: boolean;
}

export interface TransactionUISettings {
  id                     : number;
  displayNotes           : boolean;
  displayView            : boolean;
  displayAdd             : boolean;
  displayQuantity        : boolean;
  lockOrders             : boolean;
  deleteUnClosedPrintedOrders: boolean;
  closeOrderTimeCutOff   : string;
  ordersRequireCustomer  : boolean;
  validateCustomerLicenseID: boolean;
  qrDefaultServiceTypeID : number;
  defaultClientTypeID    : number;
  enablMEDClients        : boolean;
  enableLimitsView       : boolean;
  splitCheckByItem       : boolean;
  prefixBarcodeLabel     : string;
  mAXOrdersOpen          : string;
  loyaltyPointSystemValue: string;
  lotPreBarCode          : string;
  creditRecieptMinimum   : string;
  buyerAmountDiscount    : string;
  idleTime               : string;
  highTipInputPercentage : string;
  onlyAllowInventory     : boolean;
  showOrderName          : boolean;
  recmedPricing          : boolean;
  applyTaxChangesToDiscountedItems  : boolean;
  fuzzyMatchBarcodeLookup: boolean;
  requireEnterTabBarcodeLookup: boolean;
  cardPointPreAuth        : boolean;
  cardPointBoltEnabled   : boolean;
  cardPointAndroidEnabled: boolean;
  cardPointRequestTip    : boolean;
  dsiEMVAndroidEnabled   : boolean;
  dsiEMVNeteEpayEnabled  : boolean;
  dsiEMVIP               : boolean;
  payPalEnabled          : boolean;
  payPalClientID        : string;
  payPalCurrency        : string;
  creditCardFee         : string;
  updateInventoryOnScan : boolean;
  giftCardLength        : number;
  vipCustomerID         : number;
  enableGiftCards       : boolean;
  triposEnabled: boolean;
  displayEditCardOnHeader: boolean;
  showCustomerOption: boolean;
  splitEntry: boolean;
  idParseOnlyAgeConfirmation: boolean;
  assignBarcodeAsSerial: boolean;
  minClientAge: number;
  storeCreditAPI: string;
  contactAPI: string;
  startNewOrderOnCloseOrder: boolean;
  prepOrderOnClose: boolean;
  printLabelsOnclose: boolean;
  enableExactChange: boolean;
  preventDuplicateBarcodes: boolean;
  scanIncreaseQuantity: boolean;
  mixMatchTierPricing: boolean;
  toggleUserOrAllOrders: boolean;
  defaultOrderTypeID: number;
  defaultNewOrderCategoryID: number;
  weightGraceValue: number;
}

export interface StripeAPISettings {
  id: number;
  apiKey     : string;
  apiSecret: string;
  enabled: boolean;
  paymentAgreement: string;
}

export interface DSIEMVSettings {
  id        : number;
  HostOrIP  : string;
  IpPort    : string;
  MerchantID: string;
  TerminalID: string;
  OperatorID: string;
  UserTrace : string;
  TranCode  : string;
  SecureDevice: string;
  ComPort   : string;
  PinPadIpAddress: string;
  PinPadIpPort: string;
  SequenceNo: string;
  DisplayTextHandle: string;
  enabled: boolean;
}

export interface DSIEMVAndroidSettings {

}

export interface WebAppSettings {
  usersEnabled: Boolean;
}

export interface InstalledAppSettings {
  defaultReceipt     : string;
  promptBalanceSheet: boolean;
}

export interface MetrcSettings {
  enabled: boolean;
}

export interface EndOfDayProcedures {

}

export interface RStream {
  CmdResponse: CmdResponse;
}

export interface CmdResponse{
  ResponseOrigin: string;
  DSIXReturnCode: string;
  CmdStatus: string;
  TextResponse: string;
  SequenceNo: string;
  UserTrace: string;
}

export interface UIHomePageSettings {
  id                : number;
  menuEnabled       : boolean;
  brandsEnabled     : boolean;
  categoriesEnabled : boolean;
  typesEnabled      : boolean;
  departmentsEnabled: boolean;
  tierMenuEnabled   : boolean;
  staffMenuEnabled       : boolean;
  staffBrandsEnabled : boolean;
  staffCategoriesEnabled: boolean;
  staffDepartmentsEnabled: boolean;
  staffTierMenuEnabled  : boolean;
  staffTypesEnabled   : boolean;
  menuItemSize        : number; //pixels
  itemsPerPage        : number;
  backgroundImage     : string;
  tinyLogo            : string;
  logoHomePage        : string;  //  : [config.logoHomePage],
  displayCompanyName  : string;  //     : [config.displayCompanyName],
  wideOrderBar        : boolean;
  sideToolbarDefaultBrand  : boolean;
  sideToolbarEnableBrand   : boolean;
  sideToolbarEnableType    : boolean;
  sideToolbarEnableCategory: boolean;
  suppressMenuItems: boolean;
  scheduleSubMenu: boolean;
  staffscheduleSubMenu: boolean;

  sendGridOrderTemplate: string;
  sendGridSalesReportTemplate : string;
  sendGridBalanceSheetTemplate : string;
  sendGridPasswordResetTemplate : string;
  sendGridNotificationTemplate: string;
  sendGridOrderReadyNotificationTemplate: string;

  administratorEmail : string;
  outGoingCustomerSupportEmail: string;
  salesReportsEmail  : string;
  twilioEnabled      : string;
  smtpEmailEnabled   : string;

  threecxChatLink    : string;
  threeParty         : string;

  wordpressHeadless: string;
  displaySendButton: boolean;

  staffHideSearchBar: boolean;
  hideSearchBar: boolean;
  timeOutValue: number
  timeOut: boolean;

  storeNavigation: boolean;

  colorFilter: boolean;
  sizeFilter: boolean;
  speciesFilter: boolean;
  gluetenFilter: boolean;
  brandFilter: boolean;
  itemTypeFilter: boolean;
  departmentFilter: boolean;
  categoryFilter: boolean;
  subCategoryFilter: boolean;
}

@Injectable({
  providedIn: &#x27;root&#x27;
})

export class UISettingsService {

  pricingRecMed &#x3D; [
    {id: 0, name: &#x27;Both&#x27;}, {id: 1, name: &#x27;Rec&#x27;}, {id: 2, name: &#x27;Med&#x27;}
  ]

  private _toggleKeyboard          &#x3D; new BehaviorSubject&lt;boolean&gt;(null);
  public  toggleKeyboard$          &#x3D; this._toggleKeyboard.asObservable();
  //section cacluates the order panel so that all items are properly displayed and scrollable.
  private _totalOrderHeightVal   : number;

  private toggleKeyboard: boolean
  private _totalOrderHeight          &#x3D; new BehaviorSubject&lt;number&gt;(null);
  public  totalOrderHeight$          &#x3D; this._totalOrderHeight.asObservable();

  private  _remainingHeight          &#x3D; new BehaviorSubject&lt;number&gt;(null);
  public  remainingHeight$          &#x3D; this._remainingHeight.asObservable();
  private windowHeight: number;

  private orderHeaderHeight   :number;
  private customerOrderHeight :number;
  private specialOrderHeight  :number;
  private limitOrderHeight: number;

  private _orderSpecialsHeight        &#x3D; new BehaviorSubject&lt;number&gt;(null);
  public  orderSpecialsHeight$        &#x3D; this._orderSpecialsHeight.asObservable();

  private _orderHeaderHeight          &#x3D; new BehaviorSubject&lt;number&gt;(null);
  public  orderHeaderHeight$          &#x3D; this._orderHeaderHeight.asObservable();

  private _customerOrderHeight        &#x3D; new BehaviorSubject&lt;number&gt;(null);
  public  customerOrderHeight$        &#x3D; this._customerOrderHeight.asObservable();

  private _limitOrderHeight           &#x3D; new BehaviorSubject&lt;number&gt;(null);
  public  limitOrderHeight$           &#x3D; this._limitOrderHeight.asObservable();

  private _orderItemsHeight           &#x3D; new BehaviorSubject&lt;number&gt;(null);
  public  orderItemsHeight$           &#x3D; this._orderItemsHeight.asObservable();
 ////section end.

  private _emailModel  &#x3D; new BehaviorSubject&lt;EmailModel&gt;(null);
  public  EmailModel$  &#x3D; this._emailModel.asObservable();
  emailModel: EmailModel

  public  posDeviceInfo            : ITerminalSettings;
  private  _posDevice               &#x3D; new BehaviorSubject&lt;ITerminalSettings&gt;(null);
  public  posDevice$               &#x3D; this._posDevice.asObservable();

  private _transactionUISettings  &#x3D; new BehaviorSubject&lt;TransactionUISettings&gt;(null);
  public  transactionUISettings$  &#x3D; this._transactionUISettings.asObservable();

  private _homePageSetting         &#x3D; new BehaviorSubject&lt;UIHomePageSettings&gt;(null);
  public  homePageSetting$        &#x3D; this._homePageSetting.asObservable();
  private uihomePageSetting         : UIHomePageSettings

  private _DSIEMVSettings         &#x3D; new BehaviorSubject&lt;DSIEMVSettings&gt;(null);
  public  dsiEMVSettings$        &#x3D; this._DSIEMVSettings.asObservable();

  private _DSIEMVAndroidSettings         &#x3D; new BehaviorSubject&lt;DSIEMVAndroidSettings&gt;(null);
  public  dsiEMVAndroidSettings$        &#x3D; this._DSIEMVAndroidSettings.asObservable();

  private _StripeAPISettings         &#x3D; new BehaviorSubject&lt;StripeAPISettings&gt;(null);
  public  stripeAPISettings$        &#x3D; this._StripeAPISettings.asObservable();

  private _relativeValue         &#x3D; new BehaviorSubject&lt;unknown&gt;(null);
  public  relativeValue$        &#x3D; this._relativeValue.asObservable();

  //.updateRelativeValue(value)

  updateRelativeValue(value: unknown) {
    this._relativeValue.next(value)
  }
  updateToggleKeyboard()  {
    this.toggleKeyboard &#x3D; !this.toggleKeyboard
    this._toggleKeyboard.next(this.toggleKeyboard)
  }

  updateSetKeyboard(value: boolean)  {
    this.toggleKeyboard &#x3D; value
    this._toggleKeyboard.next(value)
  }

  updateorderHeaderHeight(item: number, windowHeight: number) {
    this.windowHeight &#x3D; windowHeight;
    this._orderHeaderHeight.next(item);
    this.orderHeaderHeight &#x3D; item;
    this.calcOrderHeight();
  }

  updatecustomerOrderHeight(item: number, windowHeight: number) {
    this.windowHeight &#x3D; windowHeight;
    this._customerOrderHeight.next(item);
    this.customerOrderHeight &#x3D; item
    this.calcOrderHeight();
  }

  updateLimitOrderHeight(item: number, windowHeight: number)  {
    this.windowHeight &#x3D; windowHeight;
    this._limitOrderHeight.next(item);
    this.limitOrderHeight &#x3D; item;
    this.calcOrderHeight();
  }

  updatespecialOrderHeight(item: number, windowHeight: number)  {
    this.windowHeight &#x3D; windowHeight;
    this._orderSpecialsHeight.next(item);
    this.specialOrderHeight &#x3D; item;
    this.calcOrderHeight();
  }

  calcOrderHeight() {
    if (!this.customerOrderHeight) {
      this.customerOrderHeight &#x3D; 0
    }
    if (!this.customerOrderHeight) {
      this.customerOrderHeight &#x3D; 0
    }
    if (!this.specialOrderHeight) {
      this.specialOrderHeight &#x3D; 0
    }
    if (!this.limitOrderHeight) {
      this.limitOrderHeight &#x3D; 0
    }

    const totalHeight &#x3D; this.orderHeaderHeight + this.customerOrderHeight +
                        this.specialOrderHeight + this.limitOrderHeight ;
    this._totalOrderHeightVal &#x3D; +totalHeight.toFixed(0);
    this._totalOrderHeight.next(+totalHeight.toFixed(0));

    if (this.windowHeight !&#x3D; 0) {
      const remainder &#x3D; this.windowHeight - +totalHeight - 100
      this._remainingHeight.next(remainder)
    }
  }

  updateEmailModel(item: EmailModel) {
    this._emailModel.next(item);
    this.emailModel &#x3D; item;
  }

  updateHomePageSetting(ui: UIHomePageSettings) {
    this._homePageSetting.next(ui);
    this.uihomePageSetting &#x3D; ui;
  }

  updateUISubscription(ui: TransactionUISettings) {
    this._transactionUISettings.next(ui);
  }

  updateStripeAPISettings(ui: StripeAPISettings) {
    this._StripeAPISettings.next(ui);
  }

  updateDSIEMVSettings(ui: DSIEMVSettings) {
    this._DSIEMVSettings.next(ui)
  }

  updateDSIEMVAndroidSettings(ui: DSIEMVAndroidSettings) {
    this._DSIEMVAndroidSettings.next(ui)
  }

  constructor(
      private _fb            : UntypedFormBuilder,
      private siteService    : SitesService,
      private matSnack       : MatSnackBar,
      private userAuthorizationService     : UserAuthorizationService,
      private dialog                : MatDialog,
      private platFormService   : PlatformService,
      private electronService: ElectronService,
      private settingsService: SettingsService) {
    this.initSecureSettings()
    this.getUIHomePageSettings();
  }

  initSecureSettings() {
    if (this.userAuthorizationService.currentUser()) {
      const item &#x3D; this.userAuthorizationService.currentUser();
      if (!item) {return}
      this.getTransactionUISettings();
      this.subscribeToStripedCachedConfig();
      this.getDSSIEmvSettings();
    }
  }

  getTransactionUISettings() {

    if (!this.userAuthorizationService.user) {
      return;
    }

    if (this.userAuthorizationService.user.username &#x3D;&#x3D;&#x3D; &#x27;Temp&#x27;) {
      return;
    }

    const item &#x3D; this.userAuthorizationService.currentUser()
    // console.log(&#x27;item&#x27;, item)

    this.settingsService.getUITransactionSetting().subscribe(data &#x3D;&gt; {
      this._transactionUISettings.next(data)
    })
  }

  getUIHomePageSettings() {
    if (!this.userAuthorizationService.user) {  this._homePageSetting.next(null)  }
    this.settingsService.getUIHomePageSettings().subscribe(data &#x3D;&gt; {
      this._homePageSetting.next(data)
    })
  }

  getEmailModel() {
    if (!this.userAuthorizationService.user) {  this._emailModel.next(null)  }
    this.settingsService.getEmailModel().subscribe(data &#x3D;&gt; {
      this._emailModel.next(data)
    })
  }

  getPOSDeviceSettings(deviceName: string) {
    return this.settingsService.getDeviceSettings(deviceName)
  }

  updatePOSDevice(data: ITerminalSettings) {
    this.posDeviceInfo &#x3D; data;
    this._posDevice.next(data)
  }

  openEditPOSDevice(data): any {
    let dialogRef: any;
    // console.log(&#x27;open device&#x27;)
    dialogRef &#x3D; this.dialog.open(PosEditSettingsComponent,
      { width:        &#x27;800px&#x27;,
        minWidth:     &#x27;800px&#x27;,
        height:       &#x27;650px&#x27;,
        minHeight:    &#x27;650px&#x27;,
        data   : data
      },
    )
    return dialogRef;
  }

  getDSSIEmvSettings() {
    if (!this.userAuthorizationService.user) {
      this._DSIEMVSettings.next(null)
      return;
    }
     if (!this.userAuthorizationService.user) { return }
     this.settingsService.getDSIEMVSettings().subscribe(data &#x3D;&gt; {
      this._DSIEMVSettings.next(data)
    })
  }
  ////////////// subscribeToStripedCachedConfig
  subscribeToStripedCachedConfig()  {
    if (!this.userAuthorizationService.user) {
      return;
    }
    if (this.userAuthorizationService.user.username &#x3D;&#x3D;&#x3D; &#x27;Temp&#x27;) {
      return;
    }

   this.settingsService.getStripeAPISetting().subscribe(data &#x3D;&gt; {
      this.updateStripeAPISettings(data);
   });
  }

  get homePageSetting(): UIHomePageSettings {
    if (this.uihomePageSetting) { return  this.uihomePageSetting }
  }

  getSetting(name: string): Observable&lt;ISetting&gt; {
    const site &#x3D; this.siteService.getAssignedSite();
    const user &#x3D;  JSON.parse(localStorage.getItem(&#x27;user&#x27;)) as IUser
    if (user &amp;&amp; user.username &amp;&amp; user.token &amp;&amp; (user.roles !&#x3D; &#x27;&#x27; &amp;&amp; user.roles !&#x3D; &#x27;user&#x27; )) {
      return this.settingsService.getSettingByName(site, name)
    }
    return this.settingsService.getSettingByNameNoRoles(site, name);
  }

  getDSIEMVSettings(name: string): Observable&lt;DSIEMVSettings&gt; {
    if (!this.userAuthorizationService.user) {
      this._DSIEMVSettings.next(null)
      return;
    }
    this.settingsService.getDSIEMVSettings().subscribe(data &#x3D;&gt; {
      this.updateDSIEMVSettings(data);
   });
    return this.settingsService.getDSIEMVSettings()
  }

  saveConfig(fb: UntypedFormGroup, name: string): Observable&lt;ISetting&gt;  {
    const setting &#x3D; fb.value;
    if (!setting || (!setting?.id || setting?.id &#x3D;&#x3D;&#x3D; &#x27;&#x27;)) {
      this.getSetting(name).pipe(
        switchMap(data &#x3D;&gt; {
          // console.log(&#x27;setting&#x27;, data)
          setting.id &#x3D; data.id;
          return this.setSetting(setting, name)
      }))
      // .pipe(
      //   switchMap(data &#x3D;&gt; {
      //     console.log(&#x27;returning Pipe&#x27;, data)
      //     return this.setSetting(setting, name)
      // }))
    }
    return this.setSetting(setting, name)
  }

  setSetting(uiSetting: any, name: string): Observable&lt;ISetting&gt; {
    const site    &#x3D; this.siteService.getAssignedSite();
    const setting &#x3D; {} as ISetting;
    // console.log(uiSetting);

    if (!uiSetting || !uiSetting.id) { return null }
    setting.id    &#x3D; uiSetting.id
    setting.name  &#x3D; name
    setting.text  &#x3D; JSON.stringify(uiSetting);

    if ( name &#x3D;&#x3D; &#x27;UITransactionSetting&#x27; ) {
      this.updateUISubscription(uiSetting)
    }
    if ( name &#x3D;&#x3D; &#x27;UIHomePageSettings&#x27; ) {
      this.updateHomePageSetting(uiSetting)
    }
    if ( name &#x3D;&#x3D; &#x27;DSIEMVSetting&#x27; ) {
      this.updateDSIEMVAndroidSettings(uiSetting)
    }
    if ( name &#x3D;&#x3D; &#x27;StripeAPISettings&#x27; ) {
      this.updateStripeAPISettings(uiSetting)
    }

    return this.settingsService.putSetting(site, setting.id, setting)
  }

  initHomePageForm(fb: UntypedFormGroup): UntypedFormGroup {
    fb &#x3D; this._fb.group({
      id                    : [&#x27;&#x27;],
      brandsEnabled         : [&#x27;&#x27;],
      typesEnabled          : [&#x27;&#x27;],
      categoriesEnabled     : [&#x27;&#x27;],
      departmentsEnabled    : [&#x27;&#x27;],
      tierMenuEnabled       : [&#x27;&#x27;],
      itemsPerPage          : [&#x27;&#x27;],
      menuItemSize          : [&#x27;&#x27;],
      staffBrandsEnabled    : [&#x27;&#x27;],
      staffCategoriesEnabled: [&#x27;&#x27;],
      staffDepartmentsEnabled: [&#x27;&#x27;],
      staffTierMenuEnabled  : [&#x27;&#x27;],
      staffTypesEnabled     : [&#x27;&#x27;],
      backgroundImage       : [&#x27;&#x27;],
      logoHomePage          : [&#x27;&#x27;],
      staffHideSearchBar    : [&#x27;&#x27;],
      hideSearchBar         : [&#x27;&#x27;],
      scheduleSubMenu       : [],
      staffscheduleSubMenu  : [],

      displayCompanyName    : [&#x27;&#x27;],
      tinyLogo              : [&#x27;&#x27;],
      wideOrderBar          : [&#x27;&#x27;],
      sideToolbarDefaultBrand  : [&#x27;&#x27;],
      sideToolbarEnableBrand   : [&#x27;&#x27;],
      sideToolbarEnableType    : [&#x27;&#x27;],
      sideToolbarEnableCategory: [&#x27;&#x27;],
      sendGridOrderTemplate: [&#x27;&#x27;],
      sendGridSalesReportTemplate : [&#x27;&#x27;],
      sendGridBalanceSheetTemplate : [&#x27;&#x27;],
      sendGridPasswordResetTemplate: [&#x27;&#x27;],
      sendGridNotificationTemplate: [&#x27;&#x27;],
      sendGridOrderReadyNotificationTemplate: [&#x27;&#x27;],
      administratorEmail : [&#x27;&#x27;],
      outGoingCustomerSupportEmail: [&#x27;&#x27;],
      salesReportsEmail: [&#x27;&#x27;],
      twilioEnabled: [&#x27;&#x27;],
      smtpEmailEnabled: [&#x27;&#x27;],
      threecxChatLink: [&#x27;&#x27;],
      threeParty: [&#x27;&#x27;],
      menuEnabled: [&#x27;&#x27;],
      staffMenuEnabled: [&#x27;&#x27;],
      wordpressHeadless: [],
      timeOut: [],
      timeOutValue: [],
      displaySendButton: [],
      suppressMenuItems: [],
      storeNavigation: [], //

      colorFilter: [], //: boolean;
      sizeFilter: [], //: boolean;
      speciesFilter: [], //: boolean;
      gluetenFilter: [], //: boolean;
      brandFilter: [], //: boolean;
      itemTypeFilter: [], //: boolean;
      departmentFilter: [], //: boolean;
      categoryFilter: [], //: boolean;
      subCategoryFilter: [], //: boolean;
     })
    return fb
  }



  initStripeAPISettingsForm(config: any, fb: UntypedFormGroup): UntypedFormGroup {
    fb &#x3D; this._fb.group({
      id               : [&#x27;&#x27;],
      apiSecret        : [&#x27;&#x27;],
      apiKey           : [&#x27;&#x27;],
      enabled          : [&#x27;&#x27;],
      paymentAgreement : [&#x27;&#x27;],
    })
    if (!config) { return fb}
    fb.patchValue(config)
    return fb
  }

  initEmailModel(config: any, fb: UntypedFormGroup): UntypedFormGroup {
    fb &#x3D; this._fb.group({
      id     : [&#x27;&#x27;],
      name     : [&#x27;&#x27;],
      email     : [&#x27;&#x27;],
      password     : [&#x27;&#x27;],
      smtpSender_SMPTHOST     : [&#x27;&#x27;],
      mailGunSender_Enabled     : [&#x27;&#x27;],
      mailGunSender_Domain     : [&#x27;&#x27;],
      mailGunSender_APIKey     : [&#x27;&#x27;],
      sendGridSender_Enabled     : [&#x27;&#x27;],
      sendGridSender_APIKey     : [&#x27;&#x27;],
      mailkitSender_Enabled    : [&#x27;&#x27;],
      mailKitSender_Server     : [&#x27;&#x27;],
      mailKitSender_Port     : [&#x27;&#x27;],
      mailKitSender_UseSSL     : [&#x27;&#x27;],
      mailKitSender_User     : [&#x27;&#x27;],
      endOfDayAddresses    : [&#x27;&#x27;],
      alertAddresses    : [&#x27;&#x27;],
    })
    if (!config) { return fb}
    fb.patchValue(config)
    return fb
  }

  initDSIEMVSettingsForm(config: any, fb: UntypedFormGroup): UntypedFormGroup {
    if (!config) { return this.initDSIEMVForm(fb)};
    fb &#x3D; this._fb.group({
      id               : [config.id],
      HostOrIP         : [config.DisplayTextHandle],
      IpPort           : [config.IpPort],
      MerchantID       : [config.MerchantID],
      TerminalID       : [config.TerminalID],
      OperatorID       : [config.OperatorID],
      UserTrace        : [config.UserTrace],
      TranCode         : [config.TranCode],
      SecureDevice     : [config.SecureDevice],
      ComPort          : [config.ComPort],
      PinPadIpAddress  : [config.PinPadIpAddress],
      PinPadIpPort     : [config.PinPadIpPort],
      SequenceNo       : [config.SequenceNo],
      DisplayTextHandle: [config.DisplayTextHandle]
    })
    return fb
  }


  initDSIEMVForm(fb: UntypedFormGroup): UntypedFormGroup {
    fb &#x3D; this._fb.group({
      id        : [&#x27;&#x27;],
      MerchantID: [&#x27;&#x27;],
      TerminalID: [&#x27;&#x27;],
      OperatorID: [&#x27;&#x27;],
      IpPort    : [&#x27;&#x27;],
      UserTrace : [&#x27;PointlessPOS&#x27;],
      TranCode  : [&#x27;&#x27;],
      SecureDevice: [&#x27;&#x27;],
      ComPort   : [&#x27;&#x27;],
      PinPadIpAddress: [&#x27;&#x27;],
      PinPadIpPort:[&#x27;&#x27;],
      HostOrIP  : [&#x27;&#x27;],
      SequenceNo:  [&#x27;0010010010&#x27;],
      DisplayTextHandle: [&#x27;&#x27;],
      enabled:     [&#x27;&#x27;],
    })
    return fb
  }

  initHomePageSettingsForm(config: any, fb: UntypedFormGroup): UntypedFormGroup {
    if (!config) { return this.initHomePageForm(fb) }
    fb &#x3D; this.initHomePageForm(fb);
    // console.log(&#x27;init Home Page&#x27;, config)
    fb.patchValue(config);
    return fb
  }

  initForm(fb: UntypedFormGroup): UntypedFormGroup {
    return this._fb.group({
      id                     : [],
      displayNotes           : [],
      displayView            : [],
      displayAdd             : [],
      displayQuantity        : [],
      lockOrders             : [],
      deleteUnClosedPrintedOrders: [],
      closeOrderTimeCutOff   : [],
      ordersRequireCustomer  : [],
      validateCustomerLicenseID: [],
      defaultClientTypeID    : [],
      enablMEDClients        : [],
      enableLimitsView       : [],
      splitCheckByItem       : [],
      prefixBarcodeLabel     : [],
      mAXOrdersOpen          : [],
      loyaltyPointSystemValue: [],
      lotPreBarCode          : [],
      creditRecieptMinimum   : [],
      buyerAmountDiscount    : [],
      giftCardLength         : [],
      idleTime               : [],
      highTipInputPercentage : [],
      onlyAllowInventory     : [],
      showOrderName          : [],
      recmedPricing          : [],
      applyTaxChangesToDiscountedItems : [],
      fuzzyMatchBarcodeLookup: [&#x27;&#x27;],
      requireEnterTabBarcodeLookup: [&#x27;&#x27;],
      cardPointRequestTip    : [&#x27;&#x27;],
      cardPointPreAuth       : [&#x27;&#x27;],
      cardPointBoltEnabled   : [&#x27;&#x27;],
      cardPointAndroidEnabled: [&#x27;&#x27;],
      dsiEMVAndroidEnabcardPointPreAuthled   : [&#x27;&#x27;],
      dsiEMVNeteEpayEnabled  : [&#x27;&#x27;],
      dsiEMVIP               : [&#x27;&#x27;],
      payPalEnabled          : [ ],
      payPalClientID         : [&#x27;&#x27;],
      payPalCurrency         : [ ],
      creditCardFee          : [ ],
      updateInventoryOnScan: [ ],
      triposEnabled:          [],
      displayEditCardOnHeader: [],
      showCustomerOption: [],
      splitEntry: [],
      idParseOnlyAgeConfirmation: [],
      dsiEMVAndroidEnabled: [],
      assignBarcodeAsSerial: [],
      minClientAge:  [],
      storeCreditAPI: [],
      contactAPI:  [],
      startNewOrderOnCloseOrder: [],
      prepOrderOnClose: [],
      printLabelsOnclose: [],
      enableExactChange: [],
      enableGiftCards: [],
      preventDuplicateBarcodes: [],
      scanIncreaseQuantity: [],
      mixMatchTierPricing: [],
      toggleUserOrAllOrders: [],
      defaultOrderTypeID: [],
      defaultNewOrderCategoryID: [],
      weightGraceValue: [],
     })


  }

  // initContactFieldOptions(config: ContactFieldOptions: fb: UntypedFormGroup) {
  //   return this._fb.group({
  //     id : [],

  //   })
  //  }

  initUITransactionsForm(config: TransactionUISettings, fb: UntypedFormGroup): UntypedFormGroup {
    fb &#x3D; this.initForm(fb);
    fb.patchValue(config)
    return fb
  }

  setFormValue(      inputForm: UntypedFormGroup,
                     setting: ISetting,
                     name: string): Observable&lt;ISetting&gt; {
    inputForm &#x3D; this.initForm(inputForm);
    return  this.initConfig(setting, name)
  }

  initForms_Sub(inputForm: UntypedFormGroup, name: string, config: any): UntypedFormGroup {
    if (name &#x3D;&#x3D; &#x27;UITransactionSetting&#x27;) {
      return this.initUITransactionsForm(config, inputForm);
    }

    if (name &#x3D;&#x3D; &#x27;UIHomePageSettings&#x27;) {
      return this.initHomePageSettingsForm(config, inputForm);
    }

    if (name &#x3D;&#x3D; &#x27;DSIEMVSettings&#x27;) {
      return this.initDSIEMVSettingsForm(config, inputForm);
    }

    if (name &#x3D;&#x3D; &#x27;StripeAPISettings&#x27;) {
      return this.initStripeAPISettingsForm(config, inputForm);
    }

    if (name &#x3D;&#x3D; &#x27;EmailModel&#x27;) {
      return this.initStripeAPISettingsForm(config, inputForm);
    }
  }

  initConfig(setting: ISetting, name: string): Observable&lt;ISetting&gt; {
    const ui &#x3D; {} as TransactionUISettings

    if (!setting || setting.id) {
      const site    &#x3D; this.siteService.getAssignedSite();
      return this.settingsService.getSettingByNameNoRoles(site, name).pipe()
    };

    ui.id &#x3D; setting.id
    return this.setSetting(ui, name)
  }

  updateUIJSONSetting(name: string, settingText: string) {
    const config &#x3D; JSON.parse(settingText) // as TransactionUISettings
    if (name &#x3D;&#x3D; &#x27;UITransactionSetting&#x27;) {
      this.updateUISubscription(config)
    }
    if (name &#x3D;&#x3D; &#x27;UIHomePageSettings&#x27;) {
      this.updateHomePageSetting(config)
    }
    if (name &#x3D;&#x3D; &#x27;DSIEMVSettings&#x27;) {
      this.updateDSIEMVSettings(config)
    }
    if (name &#x3D;&#x3D; &#x27;StripeAPISettings&#x27;) {
      this.updateStripeAPISettings(config)
    }
  }

   electronZoom(value) {
    // console.log(&#x27;Zoom Occured&#x27;)
    if (this.platFormService.isAppElectron) {
      const electron &#x3D; this.electronService.remote.require(&#x27;./index.js&#x27;);
      if (!electron) {
        // console.log(&#x27;electron is undefined&#x27;)
      }
      electron.electronZoomControl(value)
    }
  }

  notify(message: string, title: string) {
    this.matSnack.open(message, title, {duration: 1000})
  }
}
</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'RStream-1.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
