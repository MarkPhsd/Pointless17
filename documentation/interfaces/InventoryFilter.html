<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>pointless documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">pointless documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  InventoryFilter</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/_services/inventory/inventory-assignment.service.ts</code>
        </p>




        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#inventoryStatus" 
>
                                            inventoryStatus
                                        </a>
                                </li>
                                <li>
                                        <a href="#itemStrainName" 
>
                                            itemStrainName
                                        </a>
                                </li>
                                <li>
                                        <a href="#label" 
>
                                            label
                                        </a>
                                </li>
                                <li>
                                        <a href="#location" 
>
                                            location
                                        </a>
                                </li>
                                <li>
                                        <a href="#manifestAssigned" 
>
                                            manifestAssigned
                                        </a>
                                </li>
                                <li>
                                        <a href="#manifestID" 
>
                                            manifestID
                                        </a>
                                </li>
                                <li>
                                        <a href="#noActiveCount" 
>
                                            noActiveCount
                                        </a>
                                </li>
                                <li>
                                        <a href="#notAvalibleForSale" 
>
                                            notAvalibleForSale
                                        </a>
                                </li>
                                <li>
                                        <a href="#packageType" 
>
                                            packageType
                                        </a>
                                </li>
                                <li>
                                        <a href="#pageNumber" 
>
                                            pageNumber
                                        </a>
                                </li>
                                <li>
                                        <a href="#pageSize" 
>
                                            pageSize
                                        </a>
                                </li>
                                <li>
                                        <a href="#productCategoryName" 
>
                                            productCategoryName
                                        </a>
                                </li>
                                <li>
                                        <a href="#productName" 
>
                                            productName
                                        </a>
                                </li>
                                <li>
                                        <a href="#requiresAttention" 
>
                                            requiresAttention
                                        </a>
                                </li>
                                <li>
                                        <a href="#sku" 
>
                                            sku
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="inventoryStatus"></a>
                                        <span class="name "><b>inventoryStatus</b>
                                            <a href="#inventoryStatus">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>inventoryStatus:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="itemStrainName"></a>
                                        <span class="name "><b>itemStrainName</b>
                                            <a href="#itemStrainName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>itemStrainName:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="label"></a>
                                        <span class="name "><b>label</b>
                                            <a href="#label">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>label:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="location"></a>
                                        <span class="name "><b>location</b>
                                            <a href="#location">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>location:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="manifestAssigned"></a>
                                        <span class="name "><b>manifestAssigned</b>
                                            <a href="#manifestAssigned">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>manifestAssigned:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="manifestID"></a>
                                        <span class="name "><b>manifestID</b>
                                            <a href="#manifestID">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>manifestID:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="noActiveCount"></a>
                                        <span class="name "><b>noActiveCount</b>
                                            <a href="#noActiveCount">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>noActiveCount:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="notAvalibleForSale"></a>
                                        <span class="name "><b>notAvalibleForSale</b>
                                            <a href="#notAvalibleForSale">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>notAvalibleForSale:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="packageType"></a>
                                        <span class="name "><b>packageType</b>
                                            <a href="#packageType">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>packageType:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="pageNumber"></a>
                                        <span class="name "><b>pageNumber</b>
                                            <a href="#pageNumber">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>pageNumber:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="pageSize"></a>
                                        <span class="name "><b>pageSize</b>
                                            <a href="#pageSize">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>pageSize:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="productCategoryName"></a>
                                        <span class="name "><b>productCategoryName</b>
                                            <a href="#productCategoryName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>productCategoryName:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="productName"></a>
                                        <span class="name "><b>productName</b>
                                            <a href="#productName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>productName:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="requiresAttention"></a>
                                        <span class="name "><b>requiresAttention</b>
                                            <a href="#requiresAttention">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>requiresAttention:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="sku"></a>
                                        <span class="name "><b>sku</b>
                                            <a href="#sku">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>sku:         <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../miscellaneous/variables.html#s" target="_self" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { HttpClient } from &#x27;@angular/common/http&#x27;;
import { AuthenticationService } from &#x27;../system/authentication.service&#x27;;
import { BehaviorSubject, Observable } from &#x27;rxjs&#x27;;
import { IPOSOrder, IProduct, ISite, IUser, Paging}  from &#x27;src/app/_interfaces&#x27;;
import { SitesService } from &#x27;src/app/_services/reporting/sites.service&#x27;;
import { IMenuItem } from &#x27;src/app/_interfaces/menu/menu-products&#x27;;
import { METRCPackage } from &#x27;src/app/_interfaces/metrcs/packages&#x27;;
import { UntypedFormBuilder, UntypedFormGroup } from &#x27;@angular/forms&#x27;;
import { InventoryManifest } from &#x27;./manifest-inventory.service&#x27;;
export interface InventorySearchResultsPaged {
  results     : IInventoryAssignment[];
  paging      : Paging;
  errorMessage: string;
  total       : number;
}

export interface AvalibleInventoryResults {
  results     : IInventoryAssignment[];
  total       : number;
  errorMessage: string;
}
export interface IInventoryAssignment {
  id:                    number;
  manifestID            :number;
  packageType:           string;
  productName:           string;
  productCategoryName:   string;
  itemStrainName:        string;
  unitOfMeasureName:     string;
  unitMulitplier:        number;
  sku:                   string;
  label:                 string;
  metrcPackageID:        number;
  locationID:            number;
  location:              string;
  baseQuantity:          number;
  packageQuantity:       number;
  unitConvertedtoName:   string;
  productID:             number;
  packageCountRemaining: number;
  baseQuantityRemaining: number;
  dateCreated:           string;
  expiration:            string;
  facilityLicenseNumber: string;
  batchDate:             string;
  cost:                  number;
  price:                 number;
  notAvalibleForSale:    boolean;
  thc:                   number;
  thc2:                  number;
  thca2:                 number;
  thca:                  number;
  cbd:                   number;
  cbd2:                  number;
  cbda2:                 number;
  cbda:                  number;
  cbn:                   number;
  cbn2:                  number;
  employeeID:            number;
  employeeName:          string;
  requiresAttention:     boolean;
  jointWeight:           number;
  beginDate:             string;
  endDate:               string;
  intakeUOM:             string;
  intakeConversionValue: number;
  adjustmentType:        string;
  adjustmentDate:        string;
  adjustmentNote:        string;
  invoice:               string;
  packagedOrBulk:        number;
  priceScheduleID:       number;
  invoiceCode:           string;
  thcContent:            number;
  productionBatchNumber: string;
  sourceSiteID        : number;
  sourceSiteURL       : string;
  sourceSiteName      : string;
  destinationSiteID   : number;
  destinationSiteURL  : string;
  destinationSiteName : string;
  rejected:             string;
  priceCategoryID     : number;
  productCountUpdated : boolean;
  poDetailID          : number;
  caseQuantity        : number;
  itemSku             : string;
  casePrice           : number;
  product             : IProduct;
  serials:              Serial[];

  originID : number;
  vendor : number
  createdAtTime : string;
  lastAuditDate : string;
  itemForm : string;
  description : string;
  testLotNumber : string;
  testDate : string;
  testedBy : string;
  batchdescription : string;
  itemTypeName : string;
  itemTypeID : number;
  brandID : number;
  itemSKU : string;

}

export interface Serial {
  id:                    number;
  inventoryAssignmentID: number;
  sku:                   string;
  quantity:              number;
  serialCode:            string;
  adjustmentType:        string;
  adjustmentDate:        string;
  adjustmentNote:        string;
  beginDate:             string;
  endDate:               string;
}


export interface InventoryFilter {
  productName:          string;
  productCategoryName:  string;
  itemStrainName:       string;
  sku:                  string;
  label:                string;
  location:             string;
  noActiveCount:        boolean;
  packageType:          string;
  pageSize:             number;
  pageNumber:           number;
  notAvalibleForSale:   boolean;
  requiresAttention:    boolean;
  inventoryStatus:      number;
  manifestID        :   number;
  manifestAssigned    : number;
}

export interface InventoryStatusList {
  name: string;
  id:   number;
}
@Injectable({
  providedIn: &#x27;root&#x27;
})

export class InventoryAssignmentService {
  inventoryStatusList  &#x3D; [
    {id: 1, name: &#x27;In Stock - For Sale&#x27;},
    {id: 2, name: &#x27;In Stock - Not for Sale&#x27;},
    {id: 3, name: &#x27;Sold Out&#x27;},
    {id: 0, name:  &#x27;All&#x27;}
 ] as InventoryStatusList[]

 inventoryActiveList  &#x3D; [
  {id: 1, name: &#x27;Active&#x27;},
  {id: 2, name: &#x27;All&#x27;},
  {id: 0, name: &#x27;Inactive&#x27;}
] as InventoryStatusList[]

  private _avalibleInventoryResults &#x3D; new BehaviorSubject&lt;AvalibleInventoryResults&gt;(null);
  public avalibleInventoryResults$  &#x3D; this._avalibleInventoryResults.asObservable()
  public avalibleInventoryResults:   AvalibleInventoryResults;

  constructor(
    private http: HttpClient,
    private auth: AuthenticationService,
    private fb  : UntypedFormBuilder,
    private siteService: SitesService)
  {
  }

  createManifestFromOrder(site: ISite, manifest: InventoryManifest, order: IPOSOrder): Observable&lt;InventoryManifest&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;createManifestFromOrder&#x60;

    const parameters &#x3D; &#x60;&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    const item &#x3D; {manifest: manifest, order: order}

    return  this.http.post&lt;InventoryManifest&gt;(url, item )
  }

  rejectItemsInManifest(site: ISite, id: number, items: IInventoryAssignment[]): Observable&lt;IInventoryAssignment[]&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;rejectItemsInManifest&#x60;

    const parameters &#x3D; &#x60;?id&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.get&lt;IInventoryAssignment[]&gt;(url)
  }

  updateAvalibleInventoryResults(results) {
    this.avalibleInventoryResults &#x3D; results
    this._avalibleInventoryResults.next(results)
  }

  getAvalibleInventory(site: ISite, productID: number, active: boolean): Observable&lt;AvalibleInventoryResults&gt; {

      const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

      let endPoint &#x3D; &#x60;getAvalibleInventory&#x60;

      const user &#x3D;  JSON.parse(localStorage.getItem(&#x27;user&#x27;)) as IUser

      if (!user || !user.roles || user.roles &#x3D;&#x3D; &#x27;&#x27;) {
        endPoint  &#x3D; &#x60;getAvalibleInventoryNoRoles&#x60;
      }

      const parameters &#x3D; &#x60;?ProductID&#x3D;${productID}&amp;availible&#x3D;${active}&#x60;

      const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

      console.log(&#x27;url&#x27;, url)

      return  this.http.get&lt;AvalibleInventoryResults&gt;(url)

  }

  getSummaryOfGramsUsed(site: ISite, inventoryAssigments: IInventoryAssignment[], packageQuantity: number): any {
    if (inventoryAssigments) {
      let total &#x3D; 0; inventoryAssigments.forEach(item &#x3D;&gt;
      {
        total +&#x3D; item.baseQuantity //* item.jointWeight
      })
      console.log(&#x27;total used&#x27;)
      return packageQuantity - total
    }
  }

  getInventoryAssignment(site: ISite, id: number): Observable&lt;IInventoryAssignment&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;GetInventoryAssignment&#x60;

    const parameters &#x3D; &#x60;?id&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.get&lt;IInventoryAssignment&gt;(url)

  }

  getInventoryAssignmentHistory(site: ISite, id: number): Observable&lt;IInventoryAssignment[]&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;getInventoryHistoryList&#x60;

    const parameters &#x3D; &#x60;?id&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.get&lt;IInventoryAssignment[]&gt;(url)

  }

  getInventory(site: ISite, inventoryFilter: InventoryFilter): Observable&lt;InventorySearchResultsPaged&gt; {

      const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

      const endPoint &#x3D; &#x60;getInventoryList&#x60;

      const parameters &#x3D; &#x60;&#x60;

      const url &#x3D; &#x60;${site.url}${controller}${endPoint}&#x60;

      return  this.http.post&lt;InventorySearchResultsPaged&gt;(url, inventoryFilter)

  }

  getActiveInventory(site: ISite, inventoryFilter: InventoryFilter): Observable&lt;InventorySearchResultsPaged&gt; {

    inventoryFilter.noActiveCount &#x3D; true

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;postInventory&#x60;

    const parameters &#x3D; &#x60;&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}&#x60;

    return  this.http.post&lt;InventorySearchResultsPaged&gt;(url, inventoryFilter)

  }


    getInActiveInventory(site: ISite, pageNumber: number, pageSize: number): Observable&lt;InventorySearchResultsPaged&gt; {

      const inventoryFilter &#x3D; {}  as InventoryFilter;

      inventoryFilter.pageNumber &#x3D; pageNumber
      inventoryFilter.pageSize &#x3D; pageSize
      inventoryFilter.noActiveCount &#x3D; true

      const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

      const endPoint &#x3D; &#x60;getInventoryList&#x60;

      const parameters &#x3D; &#x60;&#x60;

      const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

      return  this.http.post&lt;InventorySearchResultsPaged&gt;(url, inventoryFilter )

  }

  getInventoryByType(site: ISite,pageNumber: number, pageSize: number, type: string): Observable&lt;InventorySearchResultsPaged&gt; {

    const inventoryFilter &#x3D; {}  as InventoryFilter;

    inventoryFilter.packageType &#x3D; type
    inventoryFilter.pageNumber &#x3D; pageNumber
    inventoryFilter.pageSize &#x3D; pageSize
    inventoryFilter.noActiveCount &#x3D; true

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;getInventoryList&#x60;

    const parameters &#x3D; &#x60;&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.post&lt;any&gt;(url, inventoryFilter )

  }

  assignItemsToManifest(site: ISite, id: number, iInventoryAssignment: IInventoryAssignment[]) {
    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;AssignToManifest&#x60;

    const parameters &#x3D; &#x60;?manifestID&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.post&lt;IInventoryAssignment[]&gt;(url, iInventoryAssignment)
  }
    // https://localhost:44309/api/InventoryAssignments/PutInventoryAssignment?id&#x3D;8
  editInventory(site: ISite, id: number, iInventoryAssignment: IInventoryAssignment): Observable&lt;IInventoryAssignment&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;PutInventoryAssignment&#x60;

    const parameters &#x3D; &#x60;?id&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.put&lt;IInventoryAssignment&gt;(url, iInventoryAssignment)

  }

  reconcileInventory(site: ISite, id: number, iInventoryAssignment: IInventoryAssignment): Observable&lt;IInventoryAssignment&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;reconcileInventory&#x60;

    const parameters &#x3D; &#x60;?id&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.put&lt;IInventoryAssignment&gt;(url, iInventoryAssignment)

  }

  postUpdateInventoryLocations(site: ISite, id: number, iInventoryAssignment: IInventoryAssignment[]): Observable&lt;IInventoryAssignment[]&gt; {

    if (id &#x3D;&#x3D; null) { return null}

    if (iInventoryAssignment &#x3D;&#x3D; null) { return null}

    if (site &#x3D;&#x3D; null) { return null}

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;postUpdateInventoryLocations&#x60;

    const parameters &#x3D; &#x60;?manifestID&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.post&lt;IInventoryAssignment[]&gt;(url, iInventoryAssignment)

  }

  postInventoryAssignmentList(site: ISite, id: number, iInventoryAssignment: IInventoryAssignment[]): Observable&lt;IInventoryAssignment[]&gt; {

    if (id &#x3D;&#x3D; null) { return null}

    if (iInventoryAssignment &#x3D;&#x3D; null) { return null}

    if (site &#x3D;&#x3D; null) { return null}

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;postInventoryAssignmentList&#x60;

    const parameters &#x3D; &#x60;?manifestID&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.post&lt;IInventoryAssignment[]&gt;(url, iInventoryAssignment)

  }

  moveInventory(site: ISite, iInventoryAssignment: IInventoryAssignment[]): Observable&lt;IInventoryAssignment[]&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;moveInventory&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}&#x60;

    return  this.http.post&lt;IInventoryAssignment[]&gt;(url, iInventoryAssignment)

  }

  addInventoryList(site: ISite, label: string, iInventoryAssignment: IInventoryAssignment[]): Observable&lt;IInventoryAssignment[]&gt; {

    console.log(iInventoryAssignment)
    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;PostInventoryAssignments&#x60;

    const parameters &#x3D; &#x60;?label&#x3D;${label}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.post&lt;IInventoryAssignment[]&gt;(url, iInventoryAssignment)

  }

  addInventoryItem(site: ISite,  iInventoryAssignment: IInventoryAssignment): Observable&lt;IInventoryAssignment&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;PostInventoryAssignment&#x60;

    const parameters &#x3D; &#x60;&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.post&lt;IInventoryAssignment&gt;(url, iInventoryAssignment)


  }

  deleteInventory(site: ISite, id: number): Observable&lt;IInventoryAssignment&gt; {

    const controller &#x3D;  &#x60;/InventoryAssignments/&#x60;

    const endPoint &#x3D; &#x60;DeleteInventoryAssignment&#x60;

    const parameters &#x3D; &#x60;?id&#x3D;${id}&#x60;

    const url &#x3D; &#x60;${site.url}${controller}${endPoint}${parameters}&#x60;

    return  this.http.delete&lt;IInventoryAssignment&gt;(url)

  }

  setNonConvertingFieldValues(inventoryAssignment: IInventoryAssignment,
                                        facility, inventoryLocation , intakeConversion, menuItem: IMenuItem, metrcPackage: METRCPackage ): IInventoryAssignment {

    // inventoryAssignment &#x3D; this.inventoryAssignmentService.setNonConvertingFieldValues( )
    //assign values to inventoryAssignement
    inventoryAssignment.locationID            &#x3D; inventoryLocation.id
    inventoryAssignment.location              &#x3D; inventoryLocation.name

    inventoryAssignment.intakeUOM             &#x3D; intakeConversion.name
    inventoryAssignment.intakeConversionValue &#x3D; intakeConversion.value

    inventoryAssignment.facilityLicenseNumber &#x3D; facility.metrcLicense

    inventoryAssignment.productID             &#x3D; menuItem.id
    inventoryAssignment.productName           &#x3D; menuItem.name
    inventoryAssignment.itemStrainName        &#x3D; menuItem.name

    console.log(inventoryAssignment)

    inventoryAssignment.label                 &#x3D; metrcPackage.label
    inventoryAssignment.metrcPackageID        &#x3D; metrcPackage.id
    inventoryAssignment.packageType           &#x3D; metrcPackage.packageType
    inventoryAssignment.unitOfMeasureName     &#x3D; metrcPackage.unitOfMeasureName
    inventoryAssignment.productCategoryName   &#x3D; metrcPackage.productCategoryName
    // metrcPackage.

    inventoryAssignment.notAvalibleForSale  &#x3D; false
    if (!inventoryLocation.activeLocation) { inventoryAssignment.notAvalibleForSale  &#x3D; true}
    inventoryAssignment.requiresAttention     &#x3D; false

    inventoryAssignment.employeeName          &#x3D; localStorage.getItem(&#x27;username&#x27;);
    inventoryAssignment.employeeID            &#x3D; parseInt(localStorage.getItem(&#x27;userID&#x27;));

    const d &#x3D; new Date();
    inventoryAssignment.dateCreated           &#x3D; d.toISOString()

    return inventoryAssignment
  }


  assignProductToInventory(menuItem: IMenuItem,  item: IInventoryAssignment) {
    if (item &amp;&amp; menuItem) {
      item.productName &#x3D; menuItem.name
      item.label       &#x3D; menuItem.sku;
      item.productID   &#x3D; menuItem.id;
      item.cost        &#x3D; menuItem.wholeSale;
      item.price       &#x3D; menuItem.retail;
      item.notAvalibleForSale &#x3D;  false;
      if (menuItem.itemType) {
        item.packageType &#x3D; menuItem.itemType.name;
      }
      return item
    }
  }

  generateSku(sku: string, index: number): string {
    return &#x60;ps-${sku.substring(sku.length - 7)}-${index}&#x60;
  }

  setItemValues(inputForm: UntypedFormGroup, item: IInventoryAssignment) {
    if (!item &amp;&amp; !inputForm) {return item}
    const  controls &#x3D; inputForm.controls
    try {

      item.dateCreated &#x3D; new Date().toISOString();
      item.expiration   &#x3D; controls[&#x27;expiration&#x27;].value;
      item.packageCountRemaining &#x3D; controls[&#x27;packageQuantity&#x27;].value;

      item.baseQuantityRemaining &#x3D; item.packageCountRemaining;
      item.packageQuantity       &#x3D; item.packageCountRemaining;
      item.baseQuantity          &#x3D; item.packageCountRemaining;
      item.jointWeight           &#x3D; 1;
      item.notAvalibleForSale    &#x3D; controls[&#x27;notAvalibleForSale&#x27;].value;
      item.invoice               &#x3D; controls[&#x27;invoiceCode&#x27;].value;
      item.location              &#x3D; controls[&#x27;location&#x27;].value;
      item.locationID            &#x3D; controls[&#x27;locationID&#x27;].value;
      item.unitOfMeasureName     &#x3D; controls[&#x27;unitOfMeasureName&#x27;].value;
      item.intakeConversionValue &#x3D;1
      if (  item.jointWeight &#x3D;&#x3D; 0) {  item.jointWeight &#x3D; 1; }

      item.price &#x3D; controls[&#x27;price&#x27;].value;
      item.cost  &#x3D; controls[&#x27;cost&#x27;].value;

    } catch (error) {
      console.log(&#x27;error on set item values&#x27;, error)
      return item
    }
    return item
  }

  assignChemicals(menuItem: IMenuItem, item: IInventoryAssignment) {
    if (!item &amp;&amp; !menuItem) {return item}
    item.thc   &#x3D; +menuItem.thc
    item.thc2  &#x3D; +menuItem.thc2
    item.thca  &#x3D; +menuItem.thca
    item.thca2 &#x3D; +menuItem.thca2
    item.cbd   &#x3D; +menuItem.cbd
    item.cbd2  &#x3D; +menuItem.cbd2
    item.cbn   &#x3D; +menuItem.cbn
    item.cbd2  &#x3D; +menuItem.cbd2
    item.cbda2 &#x3D; +menuItem.cbda2
    return item
  }

  initFields(inputForm: UntypedFormGroup) {
    inputForm &#x3D; this.fb.group({
        id:                                [&#x27;&#x27;],
        label:                             [&#x27;&#x27;],
        packageType:                       [&#x27;&#x27;],
        sourceHarvestName:                 [&#x27;&#x27;],
        locationID:                        [&#x27;&#x27;],
        locationName:                      [&#x27;&#x27;],
        locationTypeName:                  [&#x27;&#x27;],
        quantity:                          [&#x27;&#x27;],
        quantityType:                      [&#x27;&#x27;],
        unitOfMeasureName:                 [&#x27;&#x27;],
        unitOfMeasureAbbreviation:         [&#x27;&#x27;],
        patientLicenseNumber:              [&#x27;&#x27;],
        itemFromFacilityLicenseNumber:     [&#x27;&#x27;],
        itemFromFacilityName:              [&#x27;&#x27;],
        itemStrainName:                    [&#x27;&#x27;],
        note:                              [&#x27;&#x27;],
        packagedDate:                      [&#x27;&#x27;],
        initialLabTestingState:            [&#x27;&#x27;],
        labTestingState:                   [&#x27;&#x27;],
        labTestingStateDate:               [&#x27;&#x27;],
        isProductionBatch:                 [&#x27;&#x27;],
        productionBatchNumber:             [&#x27;&#x27;],
        sourceProductionBatchNumbers:      [&#x27;&#x27;],
        isTradeSample:                     [&#x27;&#x27;],
        isTradeSamplePersistent:           [&#x27;&#x27;],
        isDonation:                        [&#x27;&#x27;],
        isDonationPersistent:              [&#x27;&#x27;],
        sourcePackageIsDonation:           [&#x27;&#x27;],
        isTestingSample:                   [&#x27;&#x27;],
        isProcessValidationTestingSample:  [&#x27;&#x27;],
        productRequiresRemediation:        [&#x27;&#x27;],
        containsRemediatedProduct:         [&#x27;&#x27;],
        remediationDate:                   [&#x27;&#x27;],
        receivedDateTime:                  [&#x27;&#x27;],
        receivedFromManifestNumber:        [&#x27;&#x27;],
        receivedFrom:                      [&#x27;&#x27;],
        facilityLicenseNumber:             [&#x27;&#x27;],
        receivedFromFacilityName:          [&#x27;&#x27;],
        isOnHold:                          [&#x27;&#x27;],
        archivedDate:                      [&#x27;&#x27;],
        finishedDate:                      [&#x27;&#x27;],
        lastModified:                      [&#x27;&#x27;],
        remainingCount:                    [&#x27;&#x27;],
        inventoryImported:                 [&#x27;&#x27;],
        metrcItemID:                       [&#x27;&#x27;],
        productID:                         [&#x27;&#x27;],
        productName:                       [&#x27;&#x27;],
        productCategoryName:               [&#x27;&#x27;],
        productCategoryType:               [&#x27;&#x27;],
        inventoryLocationID :              [&#x27;&#x27;],
        expiration:                        [&#x27;&#x27;],
        conversionName  :                  [&#x27;&#x27;],

        thc:                              [&#x27;&#x27;],
        thc2:                             [&#x27;&#x27;],
        thca:                             [&#x27;&#x27;],
        thca2:                            [&#x27;&#x27;],
        cbn:                              [&#x27;&#x27;],
        cbn2:                             [&#x27;&#x27;],
        cbd:                              [&#x27;&#x27;],
        cbd2:                             [&#x27;&#x27;],
        cbda2:                            [&#x27;&#x27;],
        cbda:                             [&#x27;&#x27;],
        terpenes:                         [&#x27;&#x27;],
        mGTCH:                            [&#x27;&#x27;],
        mGCBD:                            [&#x27;&#x27;],
        childProof                        :[],

        //non data codes
        batchDate:                         [&#x27;&#x27;],
        cost:                              [0],
        price:                             [0],
        jointWeight:                       [1],
        inputQuantity:                     [0],
        active                             : [&#x27;&#x27;],
        hasImported                        : [&#x27;&#x27;],
        priceCategoryID                   :[0],

      }
    )
    return inputForm
  }

}
</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'InventoryFilter.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
